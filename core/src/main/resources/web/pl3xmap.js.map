{"version":3,"file":"pl3xmap.js","mappings":"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","sources":["webpack://pl3xmap/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://pl3xmap/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://pl3xmap/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://pl3xmap/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://pl3xmap/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://pl3xmap/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://pl3xmap/./node_modules/svg-baker-runtime/browser-symbol.js","webpack://pl3xmap/./node_modules/svg-sprite-loader/runtime/browser-sprite.build.js","webpack://pl3xmap/./src/lib/L.ellipse.js","webpack://pl3xmap/./src/lib/L.rotated.js","webpack://pl3xmap/webpack/bootstrap","webpack://pl3xmap/webpack/runtime/compat get default export","webpack://pl3xmap/webpack/runtime/define property getters","webpack://pl3xmap/webpack/runtime/global","webpack://pl3xmap/webpack/runtime/hasOwnProperty shorthand","webpack://pl3xmap/webpack/runtime/nonce","webpack://pl3xmap/./src/control/ControlManager.ts","webpack://pl3xmap/./src/player/Player.ts","webpack://pl3xmap/external var \"L\"","webpack://pl3xmap/./src/util/Util.ts","webpack://pl3xmap/./src/player/PlayerManager.ts","webpack://pl3xmap/./src/control/ControlBox.ts","webpack://pl3xmap/./src/control/BlockInfoControl.ts","webpack://pl3xmap/./src/control/CoordsControl.ts","webpack://pl3xmap/./src/marker/options/Stroke.ts","webpack://pl3xmap/./src/marker/options/Fill.ts","webpack://pl3xmap/./src/marker/options/Tooltip.ts","webpack://pl3xmap/./src/svg/link.svg","webpack://pl3xmap/./src/control/LinkControl.ts","webpack://pl3xmap/./src/marker/Marker.ts","webpack://pl3xmap/./src/marker/Circle.ts","webpack://pl3xmap/./src/marker/Ellipse.ts","webpack://pl3xmap/./src/marker/Icon.ts","webpack://pl3xmap/./src/marker/MultiPolygon.ts","webpack://pl3xmap/./src/marker/MultiPolyline.ts","webpack://pl3xmap/./src/marker/Polygon.ts","webpack://pl3xmap/./src/marker/Polyline.ts","webpack://pl3xmap/./src/marker/Rectangle.ts","webpack://pl3xmap/./src/util/Color.ts","webpack://pl3xmap/./src/marker/options/Popup.ts","webpack://pl3xmap/./src/marker/options/MarkerOptions.ts","webpack://pl3xmap/./src/layergroup/MarkerLayer.ts","webpack://pl3xmap/./src/palette/Block.ts","webpack://pl3xmap/./src/palette/BlockInfo.ts","webpack://pl3xmap/./src/tilelayer/ReversedZoomTileLayer.ts","webpack://pl3xmap/./src/tilelayer/DoubleTileLayer.ts","webpack://pl3xmap/./src/world/World.ts","webpack://pl3xmap/./src/settings/Lang.ts","webpack://pl3xmap/./src/world/WorldManager.ts","webpack://pl3xmap/./src/svg/layers.svg","webpack://pl3xmap/./src/sidebar/LayersTab.ts","webpack://pl3xmap/./src/sidebar/BaseTab.ts","webpack://pl3xmap/./src/svg/players.svg","webpack://pl3xmap/./src/sidebar/PlayersTab.ts","webpack://pl3xmap/./src/svg/maps.svg","webpack://pl3xmap/./src/sidebar/WorldsTab.ts","webpack://pl3xmap/./src/control/SidebarControl.ts","webpack://pl3xmap/./src/map/Pl3xMapLeafletMap.ts","webpack://pl3xmap/./src/scss/styles.scss?b3c8","webpack://pl3xmap/./src/Pl3xMap.ts"],"sourcesContent":["\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSpriteSymbol = factory());\n}(this, (function () { 'use strict';\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nreturn BrowserSpriteSymbol;\n\n})));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.BrowserSprite = factory());\n}(this, (function () { 'use strict';\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\n\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar deepmerge = createCommonjsModule(function (module, exports) {\n(function (root, factory) {\n    if (typeof undefined === 'function' && undefined.amd) {\n        undefined(factory);\n    } else {\n        module.exports = factory();\n    }\n}(commonjsGlobal, function () {\n\nfunction isMergeableObject(val) {\n    var nonNullObject = val && typeof val === 'object';\n\n    return nonNullObject\n        && Object.prototype.toString.call(val) !== '[object RegExp]'\n        && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nfunction emptyTarget(val) {\n    return Array.isArray(val) ? [] : {}\n}\n\nfunction cloneIfNecessary(value, optionsArgument) {\n    var clone = optionsArgument && optionsArgument.clone === true;\n    return (clone && isMergeableObject(value)) ? deepmerge(emptyTarget(value), value, optionsArgument) : value\n}\n\nfunction defaultArrayMerge(target, source, optionsArgument) {\n    var destination = target.slice();\n    source.forEach(function(e, i) {\n        if (typeof destination[i] === 'undefined') {\n            destination[i] = cloneIfNecessary(e, optionsArgument);\n        } else if (isMergeableObject(e)) {\n            destination[i] = deepmerge(target[i], e, optionsArgument);\n        } else if (target.indexOf(e) === -1) {\n            destination.push(cloneIfNecessary(e, optionsArgument));\n        }\n    });\n    return destination\n}\n\nfunction mergeObject(target, source, optionsArgument) {\n    var destination = {};\n    if (isMergeableObject(target)) {\n        Object.keys(target).forEach(function (key) {\n            destination[key] = cloneIfNecessary(target[key], optionsArgument);\n        });\n    }\n    Object.keys(source).forEach(function (key) {\n        if (!isMergeableObject(source[key]) || !target[key]) {\n            destination[key] = cloneIfNecessary(source[key], optionsArgument);\n        } else {\n            destination[key] = deepmerge(target[key], source[key], optionsArgument);\n        }\n    });\n    return destination\n}\n\nfunction deepmerge(target, source, optionsArgument) {\n    var array = Array.isArray(source);\n    var options = optionsArgument || { arrayMerge: defaultArrayMerge };\n    var arrayMerge = options.arrayMerge || defaultArrayMerge;\n\n    if (array) {\n        return Array.isArray(target) ? arrayMerge(target, source, optionsArgument) : cloneIfNecessary(source, optionsArgument)\n    } else {\n        return mergeObject(target, source, optionsArgument)\n    }\n}\n\ndeepmerge.all = function deepmergeAll(array, optionsArgument) {\n    if (!Array.isArray(array) || array.length < 2) {\n        throw new Error('first argument should be an array with at least two elements')\n    }\n\n    // we are sure there are at least 2 values, so it is safe to have no initial value\n    return array.reduce(function(prev, next) {\n        return deepmerge(prev, next, optionsArgument)\n    })\n};\n\nreturn deepmerge\n\n}));\n});\n\n//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n// An array of all currently registered event handlers for a type\n                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberof mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nvar namespaces_1 = createCommonjsModule(function (module, exports) {\nvar namespaces = {\n  svg: {\n    name: 'xmlns',\n    uri: 'http://www.w3.org/2000/svg'\n  },\n  xlink: {\n    name: 'xmlns:xlink',\n    uri: 'http://www.w3.org/1999/xlink'\n  }\n};\n\nexports.default = namespaces;\nmodule.exports = exports.default;\n});\n\n/**\n * @param {Object} attrs\n * @return {string}\n */\nvar objectToAttrsString = function (attrs) {\n  return Object.keys(attrs).map(function (attr) {\n    var value = attrs[attr].toString().replace(/\"/g, '&quot;');\n    return (attr + \"=\\\"\" + value + \"\\\"\");\n  }).join(' ');\n};\n\nvar svg = namespaces_1.svg;\nvar xlink = namespaces_1.xlink;\n\nvar defaultAttrs = {};\ndefaultAttrs[svg.name] = svg.uri;\ndefaultAttrs[xlink.name] = xlink.uri;\n\n/**\n * @param {string} [content]\n * @param {Object} [attributes]\n * @return {string}\n */\nvar wrapInSvgString = function (content, attributes) {\n  if ( content === void 0 ) content = '';\n\n  var attrs = deepmerge(defaultAttrs, attributes || {});\n  var attrsRendered = objectToAttrsString(attrs);\n  return (\"<svg \" + attrsRendered + \">\" + content + \"</svg>\");\n};\n\nvar svg$1 = namespaces_1.svg;\nvar xlink$1 = namespaces_1.xlink;\n\nvar defaultConfig = {\n  attrs: ( obj = {\n    style: ['position: absolute', 'width: 0', 'height: 0'].join('; '),\n    'aria-hidden': 'true'\n  }, obj[svg$1.name] = svg$1.uri, obj[xlink$1.name] = xlink$1.uri, obj )\n};\nvar obj;\n\nvar Sprite = function Sprite(config) {\n  this.config = deepmerge(defaultConfig, config || {});\n  this.symbols = [];\n};\n\n/**\n * Add new symbol. If symbol with the same id exists it will be replaced.\n * @param {SpriteSymbol} symbol\n * @return {boolean} `true` - symbol was added, `false` - replaced\n */\nSprite.prototype.add = function add (symbol) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var existing = this.find(symbol.id);\n\n  if (existing) {\n    symbols[symbols.indexOf(existing)] = symbol;\n    return false;\n  }\n\n  symbols.push(symbol);\n  return true;\n};\n\n/**\n * Remove symbol & destroy it\n * @param {string} id\n * @return {boolean} `true` - symbol was found & successfully destroyed, `false` - otherwise\n */\nSprite.prototype.remove = function remove (id) {\n  var ref = this;\n    var symbols = ref.symbols;\n  var symbol = this.find(id);\n\n  if (symbol) {\n    symbols.splice(symbols.indexOf(symbol), 1);\n    symbol.destroy();\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * @param {string} id\n * @return {SpriteSymbol|null}\n */\nSprite.prototype.find = function find (id) {\n  return this.symbols.filter(function (s) { return s.id === id; })[0] || null;\n};\n\n/**\n * @param {string} id\n * @return {boolean}\n */\nSprite.prototype.has = function has (id) {\n  return this.find(id) !== null;\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.stringify = function stringify () {\n  var ref = this.config;\n    var attrs = ref.attrs;\n  var stringifiedSymbols = this.symbols.map(function (s) { return s.stringify(); }).join('');\n  return wrapInSvgString(stringifiedSymbols, attrs);\n};\n\n/**\n * @return {string}\n */\nSprite.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSprite.prototype.destroy = function destroy () {\n  this.symbols.forEach(function (s) { return s.destroy(); });\n};\n\nvar SpriteSymbol = function SpriteSymbol(ref) {\n  var id = ref.id;\n  var viewBox = ref.viewBox;\n  var content = ref.content;\n\n  this.id = id;\n  this.viewBox = viewBox;\n  this.content = content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.stringify = function stringify () {\n  return this.content;\n};\n\n/**\n * @return {string}\n */\nSpriteSymbol.prototype.toString = function toString () {\n  return this.stringify();\n};\n\nSpriteSymbol.prototype.destroy = function destroy () {\n    var this$1 = this;\n\n  ['id', 'viewBox', 'content'].forEach(function (prop) { return delete this$1[prop]; });\n};\n\n/**\n * @param {string} content\n * @return {Element}\n */\nvar parse = function (content) {\n  var hasImportNode = !!document.importNode;\n  var doc = new DOMParser().parseFromString(content, 'image/svg+xml').documentElement;\n\n  /**\n   * Fix for browser which are throwing WrongDocumentError\n   * if you insert an element which is not part of the document\n   * @see http://stackoverflow.com/a/7986519/4624403\n   */\n  if (hasImportNode) {\n    return document.importNode(doc, true);\n  }\n\n  return doc;\n};\n\nvar BrowserSpriteSymbol = (function (SpriteSymbol$$1) {\n  function BrowserSpriteSymbol () {\n    SpriteSymbol$$1.apply(this, arguments);\n  }\n\n  if ( SpriteSymbol$$1 ) BrowserSpriteSymbol.__proto__ = SpriteSymbol$$1;\n  BrowserSpriteSymbol.prototype = Object.create( SpriteSymbol$$1 && SpriteSymbol$$1.prototype );\n  BrowserSpriteSymbol.prototype.constructor = BrowserSpriteSymbol;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * @param {Element} node\n   * @return {BrowserSpriteSymbol}\n   */\n  BrowserSpriteSymbol.createFromExistingNode = function createFromExistingNode (node) {\n    return new BrowserSpriteSymbol({\n      id: node.getAttribute('id'),\n      viewBox: node.getAttribute('viewBox'),\n      content: node.outerHTML\n    });\n  };\n\n  BrowserSpriteSymbol.prototype.destroy = function destroy () {\n    if (this.isMounted) {\n      this.unmount();\n    }\n    SpriteSymbol$$1.prototype.destroy.call(this);\n  };\n\n  /**\n   * @param {Element|string} target\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.mount = function mount (target) {\n    if (this.isMounted) {\n      return this.node;\n    }\n\n    var mountTarget = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = this.render();\n    this.node = node;\n\n    mountTarget.appendChild(node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSpriteSymbol.prototype.render = function render () {\n    var content = this.stringify();\n    return parse(wrapInSvgString(content)).childNodes[0];\n  };\n\n  BrowserSpriteSymbol.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  Object.defineProperties( BrowserSpriteSymbol.prototype, prototypeAccessors );\n\n  return BrowserSpriteSymbol;\n}(SpriteSymbol));\n\nvar defaultConfig$1 = {\n  /**\n   * Should following options be automatically configured:\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @type {boolean}\n   */\n  autoConfigure: true,\n\n  /**\n   * Default mounting selector\n   * @type {string}\n   */\n  mountTo: 'body',\n\n  /**\n   * Fix disappearing SVG elements when <base href> exists.\n   * Executes when sprite mounted.\n   * @see http://stackoverflow.com/a/18265336/796152\n   * @see https://github.com/everdimension/angular-svg-base-fix\n   * @see https://github.com/angular/angular.js/issues/8934#issuecomment-56568466\n   * @type {boolean}\n   */\n  syncUrlsWithBaseTag: false,\n\n  /**\n   * Should sprite listen custom location change event\n   * @type {boolean}\n   */\n  listenLocationChangeEvent: true,\n\n  /**\n   * Custom window event name which should be emitted to update sprite urls\n   * @type {string}\n   */\n  locationChangeEvent: 'locationChange',\n\n  /**\n   * Emit location change event in Angular automatically\n   * @type {boolean}\n   */\n  locationChangeAngularEmitter: false,\n\n  /**\n   * Selector to find symbols usages when updating sprite urls\n   * @type {string}\n   */\n  usagesToUpdate: 'use[*|href]',\n\n  /**\n   * Fix Firefox bug when gradients and patterns don't work if they are within a symbol.\n   * Executes when sprite is rendered, but not mounted.\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=306674\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=353575\n   * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1235364\n   * @type {boolean}\n   */\n  moveGradientsOutsideSymbol: false\n};\n\n/**\n * @param {*} arrayLike\n * @return {Array}\n */\nvar arrayFrom = function (arrayLike) {\n  return Array.prototype.slice.call(arrayLike, 0);\n};\n\nvar browser = {\n  isChrome: function () { return /chrome/i.test(navigator.userAgent); },\n  isFirefox: function () { return /firefox/i.test(navigator.userAgent); },\n\n  // https://msdn.microsoft.com/en-us/library/ms537503(v=vs.85).aspx\n  isIE: function () { return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent); },\n  isEdge: function () { return /edge/i.test(navigator.userAgent); }\n};\n\n/**\n * @param {string} name\n * @param {*} data\n */\nvar dispatchEvent = function (name, data) {\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(name, false, false, data);\n  window.dispatchEvent(event);\n};\n\n/**\n * IE doesn't evaluate <style> tags in SVGs that are dynamically added to the page.\n * This trick will trigger IE to read and use any existing SVG <style> tags.\n * @see https://github.com/iconic/SVGInjector/issues/23\n * @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10898469/\n *\n * @param {Element} node DOM Element to search <style> tags in\n * @return {Array<HTMLStyleElement>}\n */\nvar evalStylesIEWorkaround = function (node) {\n  var updatedNodes = [];\n\n  arrayFrom(node.querySelectorAll('style'))\n    .forEach(function (style) {\n      style.textContent += '';\n      updatedNodes.push(style);\n    });\n\n  return updatedNodes;\n};\n\n/**\n * @param {string} [url] If not provided - current URL will be used\n * @return {string}\n */\nvar getUrlWithoutFragment = function (url) {\n  return (url || window.location.href).split('#')[0];\n};\n\n/* global angular */\n/**\n * @param {string} eventName\n */\nvar locationChangeAngularEmitter = function (eventName) {\n  angular.module('ng').run(['$rootScope', function ($rootScope) {\n    $rootScope.$on('$locationChangeSuccess', function (e, newUrl, oldUrl) {\n      dispatchEvent(eventName, { oldUrl: oldUrl, newUrl: newUrl });\n    });\n  }]);\n};\n\nvar defaultSelector = 'linearGradient, radialGradient, pattern, mask, clipPath';\n\n/**\n * @param {Element} svg\n * @param {string} [selector]\n * @return {Element}\n */\nvar moveGradientsOutsideSymbol = function (svg, selector) {\n  if ( selector === void 0 ) selector = defaultSelector;\n\n  arrayFrom(svg.querySelectorAll('symbol')).forEach(function (symbol) {\n    arrayFrom(symbol.querySelectorAll(selector)).forEach(function (node) {\n      symbol.parentNode.insertBefore(node, symbol);\n    });\n  });\n  return svg;\n};\n\n/**\n * @param {NodeList} nodes\n * @param {Function} [matcher]\n * @return {Attr[]}\n */\nfunction selectAttributes(nodes, matcher) {\n  var attrs = arrayFrom(nodes).reduce(function (acc, node) {\n    if (!node.attributes) {\n      return acc;\n    }\n\n    var arrayfied = arrayFrom(node.attributes);\n    var matched = matcher ? arrayfied.filter(matcher) : arrayfied;\n    return acc.concat(matched);\n  }, []);\n\n  return attrs;\n}\n\n/**\n * @param {NodeList|Node} nodes\n * @param {boolean} [clone=true]\n * @return {string}\n */\n\nvar xLinkNS = namespaces_1.xlink.uri;\nvar xLinkAttrName = 'xlink:href';\n\n// eslint-disable-next-line no-useless-escape\nvar specialUrlCharsPattern = /[{}|\\\\\\^\\[\\]`\"<>]/g;\n\nfunction encoder(url) {\n  return url.replace(specialUrlCharsPattern, function (match) {\n    return (\"%\" + (match[0].charCodeAt(0).toString(16).toUpperCase()));\n  });\n}\n\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\"); // $& means the whole matched string\n}\n\n/**\n * @param {NodeList} nodes\n * @param {string} startsWith\n * @param {string} replaceWith\n * @return {NodeList}\n */\nfunction updateReferences(nodes, startsWith, replaceWith) {\n  arrayFrom(nodes).forEach(function (node) {\n    var href = node.getAttribute(xLinkAttrName);\n    if (href && href.indexOf(startsWith) === 0) {\n      var newUrl = href.replace(startsWith, replaceWith);\n      node.setAttributeNS(xLinkNS, xLinkAttrName, newUrl);\n    }\n  });\n\n  return nodes;\n}\n\n/**\n * List of SVG attributes to update url() target in them\n */\nvar attList = [\n  'clipPath',\n  'colorProfile',\n  'src',\n  'cursor',\n  'fill',\n  'filter',\n  'marker',\n  'markerStart',\n  'markerMid',\n  'markerEnd',\n  'mask',\n  'stroke',\n  'style'\n];\n\nvar attSelector = attList.map(function (attr) { return (\"[\" + attr + \"]\"); }).join(',');\n\n/**\n * Update URLs in svg image (like `fill=\"url(...)\"`) and update referencing elements\n * @param {Element} svg\n * @param {NodeList} references\n * @param {string|RegExp} startsWith\n * @param {string} replaceWith\n * @return {void}\n *\n * @example\n * const sprite = document.querySelector('svg.sprite');\n * const usages = document.querySelectorAll('use');\n * updateUrls(sprite, usages, '#', 'prefix#');\n */\nvar updateUrls = function (svg, references, startsWith, replaceWith) {\n  var startsWithEncoded = encoder(startsWith);\n  var replaceWithEncoded = encoder(replaceWith);\n\n  var nodes = svg.querySelectorAll(attSelector);\n  var attrs = selectAttributes(nodes, function (ref) {\n    var localName = ref.localName;\n    var value = ref.value;\n\n    return attList.indexOf(localName) !== -1 && value.indexOf((\"url(\" + startsWithEncoded)) !== -1;\n  });\n\n  attrs.forEach(function (attr) { return attr.value = attr.value.replace(new RegExp(escapeRegExp(startsWithEncoded), 'g'), replaceWithEncoded); });\n  updateReferences(references, startsWithEncoded, replaceWithEncoded);\n};\n\n/**\n * Internal emitter events\n * @enum\n * @private\n */\nvar Events = {\n  MOUNT: 'mount',\n  SYMBOL_MOUNT: 'symbol_mount'\n};\n\nvar BrowserSprite = (function (Sprite$$1) {\n  function BrowserSprite(cfg) {\n    var this$1 = this;\n    if ( cfg === void 0 ) cfg = {};\n\n    Sprite$$1.call(this, deepmerge(defaultConfig$1, cfg));\n\n    var emitter = mitt();\n    this._emitter = emitter;\n    this.node = null;\n\n    var ref = this;\n    var config = ref.config;\n\n    if (config.autoConfigure) {\n      this._autoConfigure(cfg);\n    }\n\n    if (config.syncUrlsWithBaseTag) {\n      var baseUrl = document.getElementsByTagName('base')[0].getAttribute('href');\n      emitter.on(Events.MOUNT, function () { return this$1.updateUrls('#', baseUrl); });\n    }\n\n    var handleLocationChange = this._handleLocationChange.bind(this);\n    this._handleLocationChange = handleLocationChange;\n\n    // Provide way to update sprite urls externally via dispatching custom window event\n    if (config.listenLocationChangeEvent) {\n      window.addEventListener(config.locationChangeEvent, handleLocationChange);\n    }\n\n    // Emit location change event in Angular automatically\n    if (config.locationChangeAngularEmitter) {\n      locationChangeAngularEmitter(config.locationChangeEvent);\n    }\n\n    // After sprite mounted\n    emitter.on(Events.MOUNT, function (spriteNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(spriteNode);\n      }\n    });\n\n    // After symbol mounted into sprite\n    emitter.on(Events.SYMBOL_MOUNT, function (symbolNode) {\n      if (config.moveGradientsOutsideSymbol) {\n        moveGradientsOutsideSymbol(symbolNode.parentNode);\n      }\n\n      if (browser.isIE() || browser.isEdge()) {\n        evalStylesIEWorkaround(symbolNode);\n      }\n    });\n  }\n\n  if ( Sprite$$1 ) BrowserSprite.__proto__ = Sprite$$1;\n  BrowserSprite.prototype = Object.create( Sprite$$1 && Sprite$$1.prototype );\n  BrowserSprite.prototype.constructor = BrowserSprite;\n\n  var prototypeAccessors = { isMounted: {} };\n\n  /**\n   * @return {boolean}\n   */\n  prototypeAccessors.isMounted.get = function () {\n    return !!this.node;\n  };\n\n  /**\n   * Automatically configure following options\n   * - `syncUrlsWithBaseTag`\n   * - `locationChangeAngularEmitter`\n   * - `moveGradientsOutsideSymbol`\n   * @param {Object} cfg\n   * @private\n   */\n  BrowserSprite.prototype._autoConfigure = function _autoConfigure (cfg) {\n    var ref = this;\n    var config = ref.config;\n\n    if (typeof cfg.syncUrlsWithBaseTag === 'undefined') {\n      config.syncUrlsWithBaseTag = typeof document.getElementsByTagName('base')[0] !== 'undefined';\n    }\n\n    if (typeof cfg.locationChangeAngularEmitter === 'undefined') {\n        config.locationChangeAngularEmitter = typeof window.angular !== 'undefined';\n    }\n\n    if (typeof cfg.moveGradientsOutsideSymbol === 'undefined') {\n      config.moveGradientsOutsideSymbol = browser.isFirefox();\n    }\n  };\n\n  /**\n   * @param {Event} event\n   * @param {Object} event.detail\n   * @param {string} event.detail.oldUrl\n   * @param {string} event.detail.newUrl\n   * @private\n   */\n  BrowserSprite.prototype._handleLocationChange = function _handleLocationChange (event) {\n    var ref = event.detail;\n    var oldUrl = ref.oldUrl;\n    var newUrl = ref.newUrl;\n    this.updateUrls(oldUrl, newUrl);\n  };\n\n  /**\n   * Add new symbol. If symbol with the same id exists it will be replaced.\n   * If sprite already mounted - `symbol.mount(sprite.node)` will be called.\n   * @fires Events#SYMBOL_MOUNT\n   * @param {BrowserSpriteSymbol} symbol\n   * @return {boolean} `true` - symbol was added, `false` - replaced\n   */\n  BrowserSprite.prototype.add = function add (symbol) {\n    var sprite = this;\n    var isNewSymbol = Sprite$$1.prototype.add.call(this, symbol);\n\n    if (this.isMounted && isNewSymbol) {\n      symbol.mount(sprite.node);\n      this._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    }\n\n    return isNewSymbol;\n  };\n\n  /**\n   * Attach to existing DOM node\n   * @param {string|Element} target\n   * @return {Element|null} attached DOM Element. null if node to attach not found.\n   */\n  BrowserSprite.prototype.attach = function attach (target) {\n    var this$1 = this;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    /** @type Element */\n    var node = typeof target === 'string' ? document.querySelector(target) : target;\n    sprite.node = node;\n\n    // Already added symbols needs to be mounted\n    this.symbols.forEach(function (symbol) {\n      symbol.mount(sprite.node);\n      this$1._emitter.emit(Events.SYMBOL_MOUNT, symbol.node);\n    });\n\n    // Create symbols from existing DOM nodes, add and mount them\n    arrayFrom(node.querySelectorAll('symbol'))\n      .forEach(function (symbolNode) {\n        var symbol = BrowserSpriteSymbol.createFromExistingNode(symbolNode);\n        symbol.node = symbolNode; // hack to prevent symbol mounting to sprite when adding\n        sprite.add(symbol);\n      });\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  BrowserSprite.prototype.destroy = function destroy () {\n    var ref = this;\n    var config = ref.config;\n    var symbols = ref.symbols;\n    var _emitter = ref._emitter;\n\n    symbols.forEach(function (s) { return s.destroy(); });\n\n    _emitter.off('*');\n    window.removeEventListener(config.locationChangeEvent, this._handleLocationChange);\n\n    if (this.isMounted) {\n      this.unmount();\n    }\n  };\n\n  /**\n   * @fires Events#MOUNT\n   * @param {string|Element} [target]\n   * @param {boolean} [prepend=false]\n   * @return {Element|null} rendered sprite node. null if mount node not found.\n   */\n  BrowserSprite.prototype.mount = function mount (target, prepend) {\n    if ( target === void 0 ) target = this.config.mountTo;\n    if ( prepend === void 0 ) prepend = false;\n\n    var sprite = this;\n\n    if (sprite.isMounted) {\n      return sprite.node;\n    }\n\n    var mountNode = typeof target === 'string' ? document.querySelector(target) : target;\n    var node = sprite.render();\n    this.node = node;\n\n    if (prepend && mountNode.childNodes[0]) {\n      mountNode.insertBefore(node, mountNode.childNodes[0]);\n    } else {\n      mountNode.appendChild(node);\n    }\n\n    this._emitter.emit(Events.MOUNT, node);\n\n    return node;\n  };\n\n  /**\n   * @return {Element}\n   */\n  BrowserSprite.prototype.render = function render () {\n    return parse(this.stringify());\n  };\n\n  /**\n   * Detach sprite from the DOM\n   */\n  BrowserSprite.prototype.unmount = function unmount () {\n    this.node.parentNode.removeChild(this.node);\n  };\n\n  /**\n   * Update URLs in sprite and usage elements\n   * @param {string} oldUrl\n   * @param {string} newUrl\n   * @return {boolean} `true` - URLs was updated, `false` - sprite is not mounted\n   */\n  BrowserSprite.prototype.updateUrls = function updateUrls$1 (oldUrl, newUrl) {\n    if (!this.isMounted) {\n      return false;\n    }\n\n    var usages = document.querySelectorAll(this.config.usagesToUpdate);\n\n    updateUrls(\n      this.node,\n      usages,\n      ((getUrlWithoutFragment(oldUrl)) + \"#\"),\n      ((getUrlWithoutFragment(newUrl)) + \"#\")\n    );\n\n    return true;\n  };\n\n  Object.defineProperties( BrowserSprite.prototype, prototypeAccessors );\n\n  return BrowserSprite;\n}(Sprite));\n\nvar ready$1 = createCommonjsModule(function (module) {\n/*!\n  * domready (c) Dustin Diaz 2014 - License MIT\n  */\n!function (name, definition) {\n\n  { module.exports = definition(); }\n\n}('domready', function () {\n\n  var fns = [], listener\n    , doc = document\n    , hack = doc.documentElement.doScroll\n    , domContentLoaded = 'DOMContentLoaded'\n    , loaded = (hack ? /^loaded|^c/ : /^loaded|^i|^c/).test(doc.readyState);\n\n\n  if (!loaded)\n  { doc.addEventListener(domContentLoaded, listener = function () {\n    doc.removeEventListener(domContentLoaded, listener);\n    loaded = 1;\n    while (listener = fns.shift()) { listener(); }\n  }); }\n\n  return function (fn) {\n    loaded ? setTimeout(fn, 0) : fns.push(fn);\n  }\n\n});\n});\n\nvar spriteNodeId = '__SVG_SPRITE_NODE__';\nvar spriteGlobalVarName = '__SVG_SPRITE__';\nvar isSpriteExists = !!window[spriteGlobalVarName];\n\n// eslint-disable-next-line import/no-mutable-exports\nvar sprite;\n\nif (isSpriteExists) {\n  sprite = window[spriteGlobalVarName];\n} else {\n  sprite = new BrowserSprite({\n    attrs: {\n      id: spriteNodeId,\n      'aria-hidden': 'true'\n    }\n  });\n  window[spriteGlobalVarName] = sprite;\n}\n\nvar loadSprite = function () {\n  /**\n   * Check for page already contains sprite node\n   * If found - attach to and reuse it's content\n   * If not - render and mount the new sprite\n   */\n  var existing = document.getElementById(spriteNodeId);\n\n  if (existing) {\n    sprite.attach(existing);\n  } else {\n    sprite.mount(document.body, true);\n  }\n};\n\nif (document.body) {\n  loadSprite();\n} else {\n  ready$1(loadSprite);\n}\n\nvar sprite$1 = sprite;\n\nreturn sprite$1;\n\n})));\n","/**\n * Copyright 2014 JD Fergason\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// https://github.com/PurpurMC/Purpur#initial-setup\n\nL.SVG.include({\n    _updateEllipse: function (layer) {\n        var rx = layer._radiusX,\n            ry = layer._radiusY,\n            phi = layer._tiltDeg,\n            endPoint = layer._endPointParams;\n\n        var d = 'M' + endPoint.x0 + ',' + endPoint.y0 +\n            'A' + rx + ',' + ry + ',' + phi + ',' +\n            endPoint.largeArc + ',' + endPoint.sweep + ',' +\n            endPoint.x1 + ',' + endPoint.y1 + ' z';\n        this._setPath(layer, d);\n    }\n});\n\nL.Canvas.include({\n    _updateEllipse: function (layer) {\n        if (layer._empty()) {\n            return;\n        }\n\n        var p = layer._point,\n            ctx = this._ctx,\n            r = layer._radiusX,\n            s = (layer._radiusY || r) / r;\n\n        // https://github.com/jdfergason/Leaflet.Ellipse/commit/900d2904902da10248c23fe8d4fc022d3f68d70c\n        if (this.hasOwnProperty('_drawnLayers')) {\n            this._drawnlayers[layer._leaflet_id] = layer;\n        } else if (this.hasOwnProperty('_layers')) {\n            this._layers[layer._leaflet_id] = layer;\n        } else {\n            throw new Error(\"Cannot find property _drawnLayers or _layers\");\n        }\n\n        ctx.save();\n\n        ctx.translate(p.x, p.y);\n        if (layer._tilt !== 0) {\n            ctx.rotate(layer._tilt);\n        }\n        if (s !== 1) {\n            ctx.scale(1, s);\n        }\n\n        ctx.beginPath();\n        ctx.arc(0, 0, r, 0, Math.PI * 2);\n        ctx.restore();\n\n        this._fillStroke(ctx, layer);\n    },\n});\n\nL.Ellipse = L.Path.extend({\n\n    options: {\n        fill: true,\n        startAngle: 0,\n        endAngle: 359.9\n    },\n\n    initialize: function (latlng, radii, tilt, options) {\n\n        L.setOptions(this, options);\n        this._latlng = L.latLng(latlng);\n\n        if (tilt) {\n            this._tiltDeg = tilt;\n        } else {\n            this._tiltDeg = 0;\n        }\n\n        if (radii) {\n            this._mRadiusX = radii[0];\n            this._mRadiusY = radii[1];\n        }\n    },\n\n    setRadius: function (radii) {\n        this._mRadiusX = radii[0];\n        this._mRadiusY = radii[1];\n        return this.redraw();\n    },\n\n    getRadius: function () {\n        return new L.point(this._mRadiusX, this._mRadiusY);\n    },\n\n    setTilt: function (tilt) {\n        this._tiltDeg = tilt;\n        return this.redraw();\n    },\n\n    getBounds: function () {\n        // TODO respect tilt (bounds are too big)\n        var lngRadius = this._getLngRadius(),\n            latRadius = this._getLatRadius(),\n            latlng = this._latlng;\n\n        return new L.LatLngBounds(\n            [latlng.lat - latRadius, latlng.lng - lngRadius],\n            [latlng.lat + latRadius, latlng.lng + lngRadius]);\n    },\n\n    // @method setLatLng(latLng: LatLng): this\n    // Sets the position of a circle marker to a new location.\n    setLatLng: function (latlng) {\n        this._latlng = L.latLng(latlng);\n        this.redraw();\n        return this.fire('move', {latlng: this._latlng});\n    },\n\n    // @method getLatLng(): LatLng\n    // Returns the current geographical position of the circle marker\n    getLatLng: function () {\n        return this._latlng;\n    },\n\n    setStyle: L.Path.prototype.setStyle,\n\n    _project: function () {\n        var lngRadius = this._getLngRadius(),\n            latRadius = this._getLatRadius(),\n            latlng = this._latlng,\n            pointLeft = this._map.latLngToLayerPoint([latlng.lat, latlng.lng - lngRadius]),\n            pointBelow = this._map.latLngToLayerPoint([latlng.lat - latRadius, latlng.lng]);\n\n        this._point = this._map.latLngToLayerPoint(latlng);\n\n        // https://github.com/jdfergason/Leaflet.Ellipse/issues/10#issuecomment-348963516\n        this._radiusX = Math.abs(this._point.x - pointLeft.x);\n        this._radiusY = Math.abs(pointBelow.y - this._point.y);\n\n        this._tilt = Math.PI * this._tiltDeg / 180;\n        this._endPointParams = this._centerPointToEndPoint();\n        this._updateBounds();\n    },\n\n    _updateBounds: function () {\n        // http://math.stackexchange.com/questions/91132/how-to-get-the-limits-of-rotated-ellipse\n        var sin = Math.sin(this._tilt);\n        var cos = Math.cos(this._tilt);\n        var sinSquare = sin * sin;\n        var cosSquare = cos * cos;\n        var aSquare = this._radiusX * this._radiusX;\n        var bSquare = this._radiusY * this._radiusY;\n        var halfWidth = Math.sqrt(aSquare * cosSquare + bSquare * sinSquare);\n        var halfHeight = Math.sqrt(aSquare * sinSquare + bSquare * cosSquare);\n        var w = this._clickTolerance();\n        var p = [halfWidth + w, halfHeight + w];\n        this._pxBounds = new L.Bounds(this._point.subtract(p), this._point.add(p));\n    },\n\n    _update: function () {\n        if (this._map) {\n            this._updatePath();\n        }\n    },\n\n    _updatePath: function () {\n        this._renderer._updateEllipse(this);\n    },\n\n    _getLatRadius: function () {\n        // https://github.com/SlidEnergy/Leaflet.Ellipse/commit/11890f2ec425ec7f7755b991fd31016bd58f59be\n        if (this._map.options.crs.infinite) {\n            return this._mRadiusY;\n        }\n        return (this._mRadiusY / 40075017) * 360;\n    },\n\n    _getLngRadius: function () {\n        // https://github.com/SlidEnergy/Leaflet.Ellipse/commit/11890f2ec425ec7f7755b991fd31016bd58f59be\n        if (this._map.options.crs.infinite) {\n            return this._mRadiusX;\n        }\n        return ((this._mRadiusX / 40075017) * 360) / Math.cos((Math.PI / 180) * this._latlng.lat);\n    },\n\n    _centerPointToEndPoint: function () {\n        // Convert between center point parameterization of an ellipse\n        // too SVG's end-point and sweep parameters.  This is an\n        // adaptation of the perl code found here:\n        // http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Paths\n        var c = this._point,\n            rx = this._radiusX,\n            ry = this._radiusY,\n            theta2 = (this.options.startAngle + this.options.endAngle) * (Math.PI / 180),\n            theta1 = this.options.startAngle * (Math.PI / 180),\n            delta = this.options.endAngle,\n            phi = this._tiltDeg * (Math.PI / 180);\n\n        // Determine start and end-point coordinates\n        var x0 = c.x + Math.cos(phi) * rx * Math.cos(theta1) +\n            Math.sin(-phi) * ry * Math.sin(theta1);\n        var y0 = c.y + Math.sin(phi) * rx * Math.cos(theta1) +\n            Math.cos(phi) * ry * Math.sin(theta1);\n\n        var x1 = c.x + Math.cos(phi) * rx * Math.cos(theta2) +\n            Math.sin(-phi) * ry * Math.sin(theta2);\n        var y1 = c.y + Math.sin(phi) * rx * Math.cos(theta2) +\n            Math.cos(phi) * ry * Math.sin(theta2);\n\n        var largeArc = (delta > 180) ? 1 : 0;\n        var sweep = (delta > 0) ? 1 : 0;\n\n        return {\n            'x0': x0, 'y0': y0, 'tilt': phi, 'largeArc': largeArc,\n            'sweep': sweep, 'x1': x1, 'y1': y1\n        };\n    },\n\n    _empty: function () {\n        return this._radiusX && this._radiusY && !this._renderer._bounds.intersects(this._pxBounds);\n    },\n\n    _containsPoint: function (p) {\n        // http://stackoverflow.com/questions/7946187/point-and-ellipse-rotated-position-test-algorithm\n        var sin = Math.sin(this._tilt);\n        var cos = Math.cos(this._tilt);\n        var dx = p.x - this._point.x;\n        var dy = p.y - this._point.y;\n        var sumA = cos * dx + sin * dy;\n        var sumB = sin * dx - cos * dy;\n\n        // if there is no fill, only use points where the stroke is\n        if (this.options.fill === false) {\n            var x = this._radiusX - this.options.weight;\n            var y = this._radiusY - this.options.weight;\n            if (sumA * sumA / (x * x) + sumB * sumB / (y * y) <= 1) {\n                return false;\n            }\n        }\n\n        return sumA * sumA / (this._radiusX * this._radiusX) + sumB * sumB / (this._radiusY * this._radiusY) <= 1;\n    }\n});\n\nL.ellipse = function (latlng, radii, tilt, options) {\n    return new L.Ellipse(latlng, radii, tilt, options);\n};\n","/*\n * The MIT License (MIT)\n *\n * Copyright (c) 2015 Benjamin Becquet\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\n\n// https://github.com/bbecquet/Leaflet.RotatedMarker\n\n(function () {\n    // save these original methods before they are overwritten\n    var proto_initIcon = L.Marker.prototype._initIcon;\n    var proto_setPos = L.Marker.prototype._setPos;\n\n    var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\n\n    L.Marker.addInitHook(function () {\n        var iconOptions = this.options.icon && this.options.icon.options;\n        var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\n        if (iconAnchor) {\n            iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\n        }\n        this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom';\n        this.options.rotationAngle = this.options.rotationAngle || 0;\n\n        // Ensure marker keeps rotated during dragging\n        this.on('drag', function (e) {\n            e.target._applyRotation();\n        });\n    });\n\n    L.Marker.include({\n        _initIcon: function () {\n            proto_initIcon.call(this);\n        },\n\n        _setPos: function (pos) {\n            proto_setPos.call(this, pos);\n            this._applyRotation();\n        },\n\n        _applyRotation: function () {\n            if (this.options.rotationAngle) {\n                this._icon.style[L.DomUtil.TRANSFORM + 'Origin'] = this.options.rotationOrigin;\n\n                if (oldIE) {\n                    // for IE 9, use the 2D rotation\n                    this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\n                } else {\n                    // for modern browsers, prefer the 3D accelerated version\n                    this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\n                }\n            }\n        },\n\n        setRotationAngle: function (angle) {\n            this.options.rotationAngle = angle;\n            this.update();\n            return this;\n        },\n\n        setRotationOrigin: function (origin) {\n            this.options.rotationOrigin = origin;\n            this.update();\n            return this;\n        }\n    });\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nc = undefined;","import {Pl3xMap} from \"../Pl3xMap\";\nimport {BlockInfoControl} from \"./BlockInfoControl\";\nimport {CoordsControl} from \"./CoordsControl\";\nimport {LinkControl} from \"./LinkControl\";\nimport SidebarControl from \"./SidebarControl\";\n\nexport class ControlManager {\n    private readonly _pl3xmap: Pl3xMap;\n\n    private _sidebarControl?: SidebarControl\n    private _blockInfoControl?: BlockInfoControl;\n    private _coordsControl?: CoordsControl;\n    private _linkControl?: LinkControl;\n\n    constructor(pl3xmap: Pl3xMap) {\n        this._pl3xmap = pl3xmap;\n    }\n\n    get sidebarControl(): SidebarControl | undefined {\n        return this._sidebarControl;\n    }\n\n    set sidebarControl(control: SidebarControl | undefined) {\n        this._sidebarControl?.remove();\n        this._sidebarControl = control;\n        this._sidebarControl?.addTo(this._pl3xmap.map);\n    }\n\n    get blockInfoControl(): BlockInfoControl | undefined {\n        return this._blockInfoControl;\n    }\n\n    set blockInfoControl(control: BlockInfoControl | undefined) {\n        this._blockInfoControl?.remove();\n        this._blockInfoControl = control;\n        this._blockInfoControl?.addTo(this._pl3xmap.map);\n    }\n\n    get coordsControl(): CoordsControl | undefined {\n        return this._coordsControl;\n    }\n\n    set coordsControl(control: CoordsControl | undefined) {\n        this._coordsControl?.remove();\n        this._coordsControl = control;\n        this._coordsControl?.addTo(this._pl3xmap.map);\n    }\n\n    get linkControl(): LinkControl | undefined {\n        return this._linkControl;\n    }\n\n    set linkControl(control: LinkControl | undefined) {\n        this._linkControl?.remove();\n        this._linkControl = control;\n        this._linkControl?.addTo(this._pl3xmap.map);\n    }\n}\n","import {Point} from \"../util/Point\";\n\nexport class Player {\n    private readonly _name: string;\n    private readonly _uuid: string;\n\n    private _displayName: string;\n    private _world?: string;\n    private _position?: Point;\n\n    constructor(name: string, uuid: string, displayName: string, world?: string, position?: Point) {\n        this._name = name;\n        this._uuid = uuid;\n        this._displayName = displayName;\n        this._world = world;\n        this._position = position;\n    }\n\n    get name(): string {\n        return this._name;\n    }\n\n    get uuid(): string {\n        return this._uuid;\n    }\n\n    get displayName(): string {\n        return this._displayName;\n    }\n\n    set displayName(displayName: string) {\n        this._displayName = displayName;\n    }\n\n    get world(): string | undefined {\n        return this._world;\n    }\n\n    set world(world: string | undefined) {\n        this._world = world;\n    }\n\n    get position(): Point | undefined {\n        return this._position;\n    }\n\n    set position(position: Point | undefined) {\n        this._position = position;\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = L;","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Point} from \"./Point\";\n\nexport function createSVGIcon(icon: string): DocumentFragment {\n    const template = L.DomUtil.create('template');\n    template.innerHTML = `<svg class=\"svg-icon\"><use href=\"#icon--${icon}\"></use></svg>`;\n    return template.content;\n}\n\nexport function getJSON(url: string) {\n    return fetch(url, {\n        headers: {\n            \"Content-Disposition\": \"inline\"\n        }\n    }).then(async res => {\n        if (res.ok) {\n            return await res.json();\n        }\n    });\n}\n\nexport function getBytes(url: string) {\n    return fetch(url, {\n        headers: {\n            \"Content-Disposition\": \"inline\"\n        }\n    }).then(async res => {\n        if (res.ok) {\n            return await res.arrayBuffer();\n        }\n    });\n}\n\nexport function getUrlParam<T>(query: string, def: T): T {\n    return new URLSearchParams(window.location.search).get(query) as unknown as T ?? def;\n}\n\n/**\n * Center marker points on block centers\n *\n * @param point marker point\n * @returns block centered latlng\n */\nexport function toCenteredLatLng(point: Point): L.LatLng {\n    return toLatLng([point.x + 0.5, point.z + 0.5]);\n}\n\nexport function toLatLng(point: L.PointTuple): L.LatLng {\n    return L.latLng(pixelsToMeters(point[1]), pixelsToMeters(point[0]));\n}\n\nexport function toLatLngBounds(point1: Point, point2: Point): L.LatLngBounds {\n    return L.latLngBounds(toCenteredLatLng(point1), toCenteredLatLng(point2));\n}\n\nexport function toPoint(latlng: L.LatLng): L.PointTuple {\n    return [metersToPixels(latlng.lng), metersToPixels(latlng.lat)];\n}\n\nexport function pixelsToMeters(num: number): number {\n    return num * getScale();\n}\n\nexport function metersToPixels(num: number): number {\n    return num / getScale();\n}\n\nexport function getScale() {\n    const map = Pl3xMap.instance.map;\n    return 1 / Math.pow(2, map.getMaxZoomOut());\n}\n\nexport function isset(obj: unknown): boolean {\n    return obj !== null && typeof obj !== 'undefined';\n}\n\nexport function getOrCreatePane(name: string): HTMLElement {\n    const map = Pl3xMap.instance.map;\n    let pane = map.getPane(name);\n    if (pane == null) {\n        pane = map.createPane(name);\n    }\n    return pane;\n}\n\nexport function insertCss(css: string, layer: string): void {\n    document.head.insertAdjacentHTML('beforeend', `<style id=\"${layer}\">${css}</style>`);\n}\n\nexport function removeCss(layer: string): void {\n    document.getElementById(layer)?.remove();\n}\n\nexport function fireCustomEvent<T>(event: keyof (WindowEventMap), detail: T): void {\n    window.dispatchEvent(new CustomEvent(event, {detail}));\n}\n\nconst navigationKeys = new Set<string>([\n    'ArrowUp',\n    'ArrowDown',\n    'ArrowLeft',\n    'ArrowRight',\n    'Home',\n    'End'\n]);\n\n/**\n * Helper method for handling keyboard based selection, along with focus navigation within a set of HTML elements.\n *\n * The given {@link KeyboardEvent} will be checked for common navigation keys (currently arrow keys + home/end)\n * and the appropriate {@link HTMLElement} in the provided array of elements will be focused. No focus changes will occur\n * if none of the provided elements are currently focused\n *\n * The event will also be checked for an enter key press, and a click event will be simulated on the target element. The\n * element does not need to be in the provided element array for this to occur\n *\n * @param {KeyboardEvent} e The event to handle\n * @param {HTMLElement[]} elements The elements to consider for focusing\n */\nexport const handleKeyboardEvent = (e: KeyboardEvent, elements: HTMLElement[]) => {\n    if (!e.target) {\n        return;\n    }\n\n    if (navigationKeys.has(e.key)) {\n        const position = elements.indexOf(e.target as HTMLElement);\n\n        if (position < 0) {\n            return;\n        }\n\n        let newPosition = position;\n\n        switch (e.key) {\n            case 'ArrowUp':\n            case 'ArrowLeft':\n                newPosition = position - 1;\n                break;\n\n            case 'ArrowDown':\n            case 'ArrowRight':\n                newPosition = position + 1;\n                break;\n\n            case 'Home':\n                newPosition = 0;\n                break;\n\n            case 'End':\n                newPosition = elements.length - 1;\n                break;\n        }\n\n        if (newPosition < 0) {\n            newPosition = elements.length - 1;\n        } else if (newPosition >= elements.length) {\n            newPosition = 0;\n        }\n\n        (elements[newPosition] as HTMLElement).focus();\n        e.preventDefault();\n    } else if (e.key === 'Enter' && e.target) {\n        const mouseEvent = new MouseEvent('click', {\n            ctrlKey: e.ctrlKey,\n            shiftKey: e.shiftKey,\n            metaKey: e.metaKey,\n            altKey: e.altKey,\n            bubbles: true,\n        });\n\n        e.target.dispatchEvent(mouseEvent);\n        e.preventDefault();\n    }\n}\n","import {Pl3xMap} from \"../Pl3xMap\";\nimport {Player} from \"./Player\";\nimport {Settings} from \"../settings/Settings\";\nimport {fireCustomEvent, toCenteredLatLng} from \"../util/Util\";\n\nexport class PlayerManager {\n    private readonly _pl3xmap: Pl3xMap;\n\n    private _players: Map<string, Player> = new Map();\n    private _follow?: Player;\n\n    constructor(pl3xmap: Pl3xMap) {\n        this._pl3xmap = pl3xmap;\n    }\n\n    public update(settings: Settings) {\n        const toRemove: Set<string> = new Set(this._players.keys());\n\n        for (const data of settings.players) {\n            const existing = this._players.get(data.uuid);\n            if (existing) {\n                // update existing\n                existing.displayName = data.displayName;\n                existing.world = data.world;\n                existing.position = data.position;\n\n                // do not remove this player\n                toRemove.delete(existing.uuid);\n            } else {\n                // create new player\n                const player = new Player(data.name, data.uuid, data.displayName, data.world, data.position);\n                this._players.set(player.uuid, player);\n\n                // inform the events\n                fireCustomEvent('playeradded', player);\n            }\n        }\n\n        toRemove.forEach(uuid => {\n            // remove players not in updated settings file\n            const player = this._players.get(uuid);\n            this._players.delete(uuid);\n            fireCustomEvent('playerremoved', player);\n        });\n\n        // follow\n        this.updateFollow();\n    }\n\n    public updateFollow() {\n        if (!this.follow) {\n            // not following anyone\n            return;\n        }\n        if (!this.follow.world) {\n            // player world is hidden\n            return;\n        }\n        if (!this.follow.position) {\n            // player position is hidden\n            return;\n        }\n        const map = this._pl3xmap.map;\n        const manager = this._pl3xmap.worldManager;\n        const world = manager.getWorld(this.follow.world);\n        if (!world) {\n            // cant find world?!\n            return;\n        }\n        const position = toCenteredLatLng(this.follow.position);\n        if (manager.currentWorld === world) {\n            // player is in viewed world\n            map.setView(position, map.getZoom());\n            return;\n        } else {\n            // player is in a different world\n            manager.setWorld(world).then(() => {\n                map.setView(position, map.getZoom());\n            });\n        }\n    }\n\n    get players(): Map<string, Player> {\n        return this._players;\n    }\n\n    get follow(): Player | undefined {\n        return this._follow;\n    }\n\n    set follow(player: Player | undefined) {\n        this._follow = player;\n        fireCustomEvent(\"followplayer\", player);\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\n\ninterface ExtendedControlOptions extends L.ControlOptions {\n    position?: L.ControlPosition & Position | undefined;\n}\n\ntype Position = 'topcenter' | 'bottomcenter';\n\nexport abstract class ControlBox extends L.Control {\n    protected readonly _pl3xmap: Pl3xMap;\n\n    protected constructor(pl3xmap: Pl3xMap, position: string) {\n        super();\n        this._pl3xmap = pl3xmap;\n        super.options = {\n            position: position\n        } as unknown as ExtendedControlOptions;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Block} from \"../palette/Block\";\nimport {Palette} from \"../palette/Palette\";\nimport {ControlBox} from \"./ControlBox\";\nimport {getJSON} from \"../util/Util\";\nimport Pl3xMapLeafletMap from \"../map/Pl3xMapLeafletMap\";\n\nexport class BlockInfoControl extends ControlBox {\n    private _dom: HTMLDivElement = L.DomUtil.create('div');\n\n    private _blockPalette: Map<number, string> = new Map();\n\n    constructor(pl3xmap: Pl3xMap, position: string) {\n        super(pl3xmap, position);\n\n        getJSON('tiles/blocks.gz').then((json: Palette[]) => {\n            Object.entries(json).forEach((data, index) => {\n                this._blockPalette.set(index, String(json[index]));\n            });\n        });\n    }\n\n    onAdd(map: Pl3xMapLeafletMap): HTMLDivElement {\n        this._dom = L.DomUtil.create('div', 'leaflet-control leaflet-control-panel leaflet-control-blockinfo');\n        this._dom.dataset.label = this._pl3xmap.settings!.lang.blockInfo.label;\n        this.update(map);\n        return this._dom;\n    }\n\n    public update(map: Pl3xMapLeafletMap): void {\n        const coords = this._pl3xmap.controlManager.coordsControl!;\n        const zoom: number = map.getCurrentZoom() < 0 ? 0 : map.getCurrentZoom();\n        const x: number = coords.x;\n        const z: number = coords.z;\n        const step: number = 1 << zoom;\n        const regionX: number = x >> 9;\n        const regionZ: number = z >> 9;\n        const fileX: number = Math.floor(regionX / step);\n        const fileZ: number = Math.floor(regionZ / step);\n        const tileX: number = (x / step) & 511;\n        const tileZ: number = (z / step) & 511;\n\n        let blockName: string = 'unknown';\n        let biomeName: string = 'unknown';\n        let y: number | undefined;\n\n        const blockInfo = this._pl3xmap.worldManager.currentWorld?.getBlockInfo(zoom, fileX, fileZ);\n        if (blockInfo !== undefined) {\n            const block: Block = blockInfo.getBlock(tileZ * 512 + tileX);\n            if (block != null) {\n                blockName = block.block == 0 ? 'unknown' : this._blockPalette.get(block.block) ?? 'unknown';\n                biomeName = block.biome == 0 ? 'unknown' : this._pl3xmap.worldManager.currentWorld?.biomePalette.get(block.biome) ?? 'unknown';\n\n                if (block.block != 0) {\n                    y = block.yPos + 1;\n                }\n            }\n        }\n\n        coords.y = y;\n        this._dom.innerHTML = this._pl3xmap.settings!.lang.blockInfo.value\n            .replace(/<block>/g, blockName!.padEnd(15, ' '))\n            .replace(/<biome>/g, biomeName!.padEnd(15, ' '));\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {ControlBox} from \"./ControlBox\";\nimport {toPoint} from \"../util/Util\";\nimport Pl3xMapLeafletMap from \"../map/Pl3xMapLeafletMap\";\n\nexport class CoordsControl extends ControlBox {\n    declare _map: Pl3xMapLeafletMap;\n    private _dom: HTMLDivElement = L.DomUtil.create('div');\n    private _x: number = 0;\n    private _y?: number;\n    private _z: number = 0;\n\n    private onEvent = (event: L.LeafletMouseEvent) => {\n        return this.update(this._map, toPoint(event.latlng));\n    }\n\n    constructor(pl3xmap: Pl3xMap, position: string) {\n        super(pl3xmap, position);\n    }\n\n    onAdd(map: Pl3xMapLeafletMap): HTMLDivElement {\n        this._dom = L.DomUtil.create('div', 'leaflet-control leaflet-control-panel leaflet-control-coordinates');\n        this._dom.dataset.label = this._pl3xmap.settings!.lang.coords.label;\n        map.addEventListener('mousemove', this.onEvent);\n        this.update(map, [0, 0]);\n        return this._dom;\n    }\n\n    onRemove(map: Pl3xMapLeafletMap): void {\n        map.removeEventListener('mousemove', this.onEvent);\n    }\n\n    private update(map: Pl3xMapLeafletMap, point: L.PointTuple): void {\n        this.x = Math.round(point[0]) - 1;\n        this.z = Math.round(point[1]) - 1;\n        this._pl3xmap.controlManager.blockInfoControl?.update(map);\n        this._dom.innerHTML = this._pl3xmap.settings!.lang.coords.value\n            .replace(/<x>/g, this.x.toString().padStart(6, ' '))\n            .replace(/<y>/g, (this.y?.toString() ?? '???').padStart(2, ' ').padEnd(3, ' '))\n            .replace(/<z>/g, this.z.toString().padEnd(6, ' '));\n    }\n\n    get x(): number {\n        return this._x;\n    }\n\n    set x(x: number) {\n        this._x = x;\n    }\n\n    get y(): number | undefined {\n        return this._y;\n    }\n\n    set y(y: number | undefined) {\n        this._y = y;\n    }\n\n    get z(): number {\n        return this._z;\n    }\n\n    set z(z: number) {\n        this._z = z;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Color} from \"../../util/Color\";\nimport {isset} from \"../../util/Util\";\n\nexport interface StrokeOptions {\n    enabled?: boolean;\n    weight?: number;\n    color?: number;\n    lineCap?: number;\n    lineJoin?: number;\n    dashArray?: string;\n    dashOffset?: string;\n}\n\nexport class Stroke {\n    private readonly _properties: L.PathOptions;\n\n    constructor(data: StrokeOptions) {\n        let props = {};\n\n        if (isset(data.enabled)) props = {...props, stroke: data.enabled};\n        if (isset(data.weight)) props = {...props, weight: data.weight};\n        if (isset(data.color)) {\n            const color = new Color(data.color!);\n            props = {...props, color: color.hex, opacity: color.opacity};\n        }\n        if (isset(data.lineCap)) props = {...props, lineCap: LineCap[data.lineCap!]};\n        if (isset(data.lineJoin)) props = {...props, lineJoin: LineJoin[data.lineJoin!]};\n        if (isset(data.dashArray)) props = {...props, dashArray: data.dashArray};\n        if (isset(data.dashOffset)) props = {...props, dashOffset: data.dashOffset};\n\n        this._properties = props;\n    }\n\n    get properties(): L.PathOptions {\n        return this._properties;\n    }\n}\n\nexport enum LineCap {\n    butt,\n    round,\n    square\n}\n\nexport enum LineJoin {\n    miter,\n    round,\n    bevel\n}\n","import * as L from \"leaflet\";\nimport {Color} from \"../../util/Color\";\nimport {isset} from \"../../util/Util\";\n\nexport interface FillOptions {\n    enabled?: boolean;\n    type?: number;\n    color?: number;\n}\n\nexport class Fill {\n    private readonly _properties: L.PathOptions;\n\n    constructor(data: FillOptions) {\n        let props = {};\n\n        if (isset(data.enabled)) props = {...props, fill: data.enabled};\n        if (isset(data.type)) props = {...props, fillRule: Type[data.type!]};\n        if (isset(data.color)) {\n            const color = new Color(data.color!);\n            props = {...props, fillColor: color.hex, fillOpacity: color.opacity};\n        }\n\n        this._properties = props;\n    }\n\n    get properties(): L.PathOptions {\n        return this._properties;\n    }\n}\n\nexport enum Type {\n    nonzero,\n    evenodd\n}\n","import * as L from \"leaflet\";\nimport {Point} from \"../../util/Point\";\nimport {getOrCreatePane, isset} from \"../../util/Util\";\n\nexport interface TooltipOptions {\n    content?: string;\n    pane?: string;\n    offset?: Point;\n    direction?: number;\n    permanent?: boolean;\n    sticky?: boolean;\n    opacity?: number;\n}\n\nexport class Tooltip {\n    private readonly _content: string;\n    private readonly _properties: L.TooltipOptions;\n\n    constructor(data: TooltipOptions) {\n        this._content = isset(data.content) ? data.content! : \"\";\n\n        let props = {};\n        if (isset(data.offset)) props = {...props, offset: [data.offset!.x, data.offset!.z]};\n        if (isset(data.direction)) props = {...props, direction: Direction[data.direction!]};\n        if (isset(data.permanent)) props = {...props, permanent: data.permanent};\n        if (isset(data.sticky)) props = {...props, sticky: data.sticky};\n        if (isset(data.opacity)) props = {...props, opacity: data.opacity};\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane!);\n            props = {\n                ...props,\n                pane: dom.className.split(\" \")[1].split(\"-\")[1]\n            };\n        }\n\n        this._properties = props;\n    }\n\n    get content(): string {\n        return this._content;\n    }\n\n    get properties(): L.TooltipOptions {\n        return this._properties;\n    }\n}\n\nexport enum Direction {\n    right,\n    left,\n    top,\n    bottom,\n    center,\n    auto\n}\n","import SpriteSymbol from \"../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon--link\",\n  \"use\": \"icon--link-usage\",\n  \"viewBox\": \"0 0 269.4 271.84\",\n  \"content\": \"<symbol viewBox=\\\"0 0 269.4 271.84\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"icon--link\\\"><path d=\\\"M110.774 86.501c-13.432 0-26.865 5.12-37.01 15.357l-58.551 59.088c-20.29 20.476-20.29 53.87 0 74.346l21.008 21.201c20.29 20.476 53.704 20.448 74.006.012l38.221-38.473a13.5 13.5 0 0 0-.064-19.092 13.5 13.5 0 0 0-19.092.062l-38.22 38.473c-10.117 10.185-25.582 10.195-35.673.012l-21.006-21.199c-10.091-10.183-10.091-26.155 0-36.338l58.55-59.086c10.092-10.183 25.57-10.183 35.66 0l10.995 11.094a13.5 13.5 0 0 0 19.092.086 13.5 13.5 0 0 0 .086-19.092l-10.992-11.094C137.639 91.62 124.206 86.5 110.774 86.5z\\\" /><path d=\\\"M196.174 0c-13.428.002-26.857 5.117-37.008 15.336l-38.219 38.473a13.5 13.5 0 0 0 .063 19.092 13.5 13.5 0 0 0 19.091-.063l38.22-38.473c10.117-10.185 25.582-10.195 35.673-.012l21.008 21.2c10.091 10.182 10.091 26.154 0 36.337l-58.55 59.088c-10.091 10.183-25.571 10.183-35.662 0l-10.992-11.094a13.5 13.5 0 0 0-19.092-.088 13.5 13.5 0 0 0-.088 19.092l10.994 11.094c20.29 20.476 53.727 20.476 74.018 0l58.55-59.088c20.29-20.476 20.29-53.87 0-74.346l-21.007-21.2c-10.145-10.24-23.57-15.351-36.998-15.35z\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {ControlBox} from \"./ControlBox\";\nimport {createSVGIcon, toPoint} from \"../util/Util\";\nimport Pl3xMapLeafletMap from \"../map/Pl3xMapLeafletMap\";\nimport '../svg/link.svg';\nimport {World} from \"../world/World\";\n\nexport class LinkControl extends ControlBox {\n    private readonly _dom: HTMLAnchorElement;\n\n    private onEvent = () => {\n        this.update();\n    }\n\n    constructor(pl3xmap: Pl3xMap, position: string) {\n        super(pl3xmap, position);\n        this._dom = L.DomUtil.create('a', 'leaflet-control leaflet-control-button leaflet-control-link');\n        this._dom.appendChild(createSVGIcon('link'));\n    }\n\n    onAdd(map: Pl3xMapLeafletMap): HTMLAnchorElement {\n        map.addEventListener('moveend', this.onEvent);\n        map.addEventListener('zoomend', this.onEvent);\n        this.update();\n        return this._dom;\n    }\n\n    onRemove(map: Pl3xMapLeafletMap): void {\n        map.removeEventListener('moveend', this.onEvent);\n        map.removeEventListener('zoomend', this.onEvent);\n    }\n\n    public update(): void {\n        const url = this.getUrlFromView(this._pl3xmap.worldManager.currentWorld);\n        this._dom.href = url;\n        this._dom.title = this._pl3xmap.settings?.lang.link.label ?? '';\n        window.history.replaceState(null, this._pl3xmap.settings!.lang.title, url);\n    }\n\n    public getUrlFromView(world?: World): string {\n        const center: L.PointTuple = toPoint(this._pl3xmap.map.getCenter());\n        const zoom: number = this._pl3xmap.map.getCurrentZoom();\n        const x: number = Math.floor(center[0]);\n        const z: number = Math.floor(center[1]);\n        let url = `?`;\n        if (world !== undefined) {\n            url += `world=${world.name}&renderer=${world.currentRenderer?.label ?? 'basic'}`;\n        }\n        return `${url}&zoom=${zoom}&x=${x}&z=${z}`;\n    }\n}\n","import * as L from \"leaflet\";\nimport {MarkerOptions} from \"./options/MarkerOptions\";\n\nexport abstract class Marker {\n    private readonly _key: string;\n    private readonly _marker: L.Layer;\n\n    protected constructor(key: string, marker: L.Layer) {\n        this._key = key;\n        this._marker = marker;\n    }\n\n    get key(): string {\n        return this._key;\n    }\n\n    get marker(): L.Layer {\n        return this._marker;\n    }\n\n    abstract update(data: unknown[], options?: MarkerOptions): void;\n}\n\nexport class Type {\n    data: unknown[];\n    options?: MarkerOptions;\n\n    constructor(data: unknown[], options?: MarkerOptions) {\n        this.data = data;\n        this.options = options;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Point} from \"../util/Point\";\nimport {getOrCreatePane, isset, pixelsToMeters, toCenteredLatLng} from \"../util/Util\";\n\ninterface CircleOptions extends L.PolylineOptions {\n    key: string;\n    center: Point;\n    radius: number;\n    pane: string;\n}\n\nexport class Circle extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as CircleOptions;\n\n        let options = {\n            ...type.options?.properties,\n            radius: pixelsToMeters(data.radius),\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.circle(toCenteredLatLng(data.center), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as CircleOptions;\n        const circle = this.marker as L.Circle;\n        circle.setLatLng(toCenteredLatLng(data.center));\n        circle.setRadius(pixelsToMeters(data.radius));\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Point} from \"../util/Point\";\nimport {getOrCreatePane, isset, pixelsToMeters, toCenteredLatLng} from \"../util/Util\";\nimport \"../lib/L.ellipse\";\n\ninterface EllipseOptions extends L.PolylineOptions {\n    key: string;\n    center: Point;\n    radius: Point;\n    tilt?: number;\n    pane: string;\n}\n\nexport class Ellipse extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as EllipseOptions;\n\n        let options = {\n            ...type.options?.properties,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.ellipse(\n            toCenteredLatLng(data.center),\n            [\n                pixelsToMeters(data.radius.x),\n                pixelsToMeters(data.radius.z)\n            ],\n            isset(data.tilt) ? data.tilt! : 0,\n            options)\n        );\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as EllipseOptions;\n        const ellipse = this.marker as L.Ellipse;\n        ellipse.setLatLng(toCenteredLatLng(data.center));\n        ellipse.setRadius([\n            pixelsToMeters(data.radius.x),\n            pixelsToMeters(data.radius.z)\n        ]);\n        if (isset(data.tilt)) {\n            ellipse.setTilt(data.tilt!);\n        }\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {MarkerOptions} from \"./options/MarkerOptions\";\nimport {Point} from \"../util/Point\";\nimport {getOrCreatePane, isset, toCenteredLatLng} from \"../util/Util\";\nimport \"../lib/L.rotated\";\n\ninterface IconOptions extends L.MarkerOptions {\n    key: string;\n    point: Point;\n    image: string;\n    retina?: string;\n    size?: Point;\n    anchor?: Point;\n    shadow?: string;\n    shadowRetina?: string;\n    shadowSize?: Point;\n    shadowAnchor?: Point;\n    rotationAngle?: number;\n    rotationOrigin?: string;\n    pane: string;\n}\n\nexport class Icon extends Marker {\n    constructor(type: Type) {\n        function url(image: string) {\n            return `images/icon/registered/${image}.png`;\n        }\n\n        const data = type.data as unknown as IconOptions;\n\n        let props = {};\n        if (isset(data.image)) props = {...props, iconUrl: url(data.image)};\n        if (isset(data.retina)) props = {...props, iconRetinaUrl: url(data.retina!)};\n        if (isset(data.size)) props = {...props, iconSize: [data.size!.x, data.size!.z]};\n        if (isset(data.anchor)) props = {...props, iconAnchor: [data.anchor!.x, data.anchor!.z]};\n        if (isset(data.shadow)) props = {...props, shadowUrl: url(data.shadow!)};\n        if (isset(data.shadowRetina)) props = {...props, shadowRetinaUrl: url(data.shadowRetina!)};\n        if (isset(data.shadowSize)) props = {...props, shadowSize: [data.shadowSize!.x, data.shadowSize!.z]};\n        if (isset(data.shadowAnchor)) props = {...props, shadowAnchor: [data.shadowAnchor!.x, data.shadowAnchor!.z]};\n\n        const tooltipOffset = type.options?.tooltip?.properties?.offset;\n        const popupOffset = type.options?.popup?.properties?.offset;\n\n        if (isset(tooltipOffset)) props = {...props, tooltipAnchor: tooltipOffset};\n        if (isset(popupOffset)) props = {...props, popupAnchor: popupOffset};\n\n        let options = {\n            ...type.options?.properties,\n            rotationAngle: data.rotationAngle,\n            rotationOrigin: data.rotationOrigin,\n            icon: L.icon(props as L.IconOptions),\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        } as IconOptions;\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\" \")[1].split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.marker(toCenteredLatLng(data.point), options));\n    }\n\n    public update(raw: unknown[], options?: MarkerOptions): void {\n        const data = raw as unknown as IconOptions;\n        const icon = this.marker as L.Marker;\n        icon.setLatLng(toCenteredLatLng(data.point));\n        const iconOptions = icon.options as IconOptions;\n        iconOptions.rotationAngle = data.rotationAngle;\n        iconOptions.rotationOrigin = data.rotationOrigin;\n        if (options?.tooltip?.content) {\n            icon.setTooltipContent(options?.tooltip?.content);\n        }\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Polygon} from \"../util/Polygon\";\nimport {getOrCreatePane, isset, toCenteredLatLng} from \"../util/Util\";\n\ninterface MultiPolygonOptions extends L.PolylineOptions {\n    key: string;\n    polygons: Polygon[];\n    pane: string;\n}\n\nexport class MultiPolygon extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as MultiPolygonOptions;\n\n        let options = {\n            ...type.options?.properties,\n            smoothFactor: 1.0,\n            noClip: false,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.polygon(MultiPolygon.createPolys(data), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as MultiPolygonOptions;\n        const polygon = this.marker as L.Polygon;\n        polygon.setLatLngs(MultiPolygon.createPolys(data));\n    }\n\n    private static createPolys(data: MultiPolygonOptions): L.LatLng[][][] {\n        const polys = [];\n        for (const polygon of data.polygons) {\n            const poly = [];\n            for (const polyline of polygon.polylines) {\n                const line = [];\n                for (const point of polyline.points) {\n                    line.push(toCenteredLatLng(point))\n                }\n                poly.push(line);\n            }\n            polys.push(poly);\n        }\n        return polys;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Polyline} from \"../util/Polyline\";\nimport {getOrCreatePane, isset, toCenteredLatLng} from \"../util/Util\";\n\ninterface MultiPolylineOptions extends L.PolylineOptions {\n    key: string;\n    polylines: Polyline[];\n    pane: string;\n}\n\nexport class MultiPolyline extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as MultiPolylineOptions;\n\n        let options = {\n            ...type.options?.properties,\n            smoothFactor: 1.0,\n            noClip: false,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.polyline(MultiPolyline.createLines(data), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as MultiPolylineOptions;\n        const polyline = this.marker as L.Polyline;\n        polyline.setLatLngs(MultiPolyline.createLines(data));\n    }\n\n    private static createLines(data: MultiPolylineOptions): L.LatLng[][] {\n        const lines = [];\n        for (const polylines of data.polylines) {\n            const line = [];\n            for (const point of polylines.points) {\n                line.push(toCenteredLatLng(point))\n            }\n            lines.push(line);\n        }\n        return lines;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Polyline} from \"../util/Polyline\";\nimport {getOrCreatePane, isset, toCenteredLatLng} from \"../util/Util\";\n\ninterface PolygonOptions extends L.PolylineOptions {\n    key: string;\n    polylines: Polyline[];\n    pane: string;\n}\n\nexport class Polygon extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as PolygonOptions;\n\n        let options = {\n            ...type.options?.properties,\n            smoothFactor: 1.0,\n            noClip: false,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.polygon(Polygon.createPoly(data), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as PolygonOptions;\n        const polygon = this.marker as L.Polygon;\n        polygon.setLatLngs(Polygon.createPoly(data));\n    }\n\n    private static createPoly(data: PolygonOptions): L.LatLng[][] {\n        const poly = [];\n        for (const polyline of data.polylines) {\n            const line = [];\n            for (const point of polyline.points) {\n                line.push(toCenteredLatLng(point));\n            }\n            poly.push(line);\n        }\n        return poly;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Point} from \"../util/Point\";\nimport {getOrCreatePane, isset, toCenteredLatLng} from \"../util/Util\";\n\ninterface PolylineOptions extends L.PolylineOptions {\n    key: string;\n    points: Point[];\n    pane: string;\n}\n\nexport class Polyline extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as PolylineOptions;\n\n        let options = {\n            ...type.options?.properties,\n            smoothFactor: 1.0,\n            noClip: false,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.polyline(Polyline.createLine(data), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as PolylineOptions;\n        const polyline = this.marker as L.Polyline;\n        polyline.setLatLngs(Polyline.createLine(data));\n    }\n\n    private static createLine(data: PolylineOptions): L.LatLng[] {\n        const line = [];\n        for (const point of data.points) {\n            line.push(toCenteredLatLng(point))\n        }\n        return line;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Marker, Type} from \"./Marker\";\nimport {Point} from \"../util/Point\";\nimport {getOrCreatePane, isset, toLatLngBounds} from \"../util/Util\";\n\ninterface RectangleOptions extends L.PolylineOptions {\n    key: string;\n    point1: Point;\n    point2: Point;\n    pane: string;\n}\n\nexport class Rectangle extends Marker {\n    constructor(type: Type) {\n        const data = type.data as unknown as RectangleOptions;\n\n        let options = {\n            ...type.options?.properties,\n            smoothFactor: 1.0,\n            noClip: false,\n            bubblingMouseEvents: true,\n            interactive: true,\n            attribution: undefined\n        };\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane);\n            options = {\n                ...options,\n                pane: dom.className.split(\"-\")[1]\n            };\n        }\n\n        super(data.key, L.rectangle(toLatLngBounds(data.point1, data.point2), options));\n    }\n\n    public update(raw: unknown[]): void {\n        const data = raw as unknown as RectangleOptions;\n        const rectangle = this.marker as L.Rectangle;\n        rectangle.setBounds(toLatLngBounds(data.point1, data.point2));\n    }\n}\n","export class Color {\n    private readonly _rgb: number;\n    private readonly _hex: string;\n    private readonly _opacity: number;\n\n    constructor(color: number) {\n        this._rgb = color;\n        this._hex = \"#\" + (color & 0xFFFFFF).toString(16).padStart(6, '0');\n        this._opacity = (color >> 24 & 0xFF) / 0xFF;\n    }\n\n    get rgb(): number {\n        return this._rgb;\n    }\n\n    get hex(): string {\n        return this._hex;\n    }\n\n    get opacity(): number {\n        return this._opacity;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Point} from \"../../util/Point\";\nimport {getOrCreatePane, isset} from \"../../util/Util\";\n\nexport interface PopupOptions {\n    content?: string;\n    pane?: string;\n    offset?: Point;\n    maxWidth?: number;\n    minWidth?: number;\n    maxHeight?: number;\n    autoPan?: boolean;\n    autoPanPaddingTopLeft?: Point;\n    autoPanPaddingBottomRight?: Point;\n    autoPanPadding?: Point;\n    keepInView?: boolean;\n    closeButton?: boolean;\n    autoClose?: boolean;\n    closeOnEscapeKey?: boolean;\n    closeOnClick?: boolean;\n}\n\nexport class Popup {\n    private readonly _content: string;\n    private readonly _properties: L.PopupOptions;\n\n    constructor(data: PopupOptions) {\n        this._content = isset(data.content) ? data.content! : \"\";\n\n        let props: L.PopupOptions = {};\n        if (isset(data.offset)) props = {...props, offset: [data.offset!.x, data.offset!.z]};\n        if (isset(data.maxWidth)) props = {...props, maxWidth: data.maxWidth};\n        if (isset(data.minWidth)) props = {...props, minWidth: data.minWidth};\n        if (isset(data.maxHeight)) props = {...props, maxHeight: data.maxHeight};\n        if (isset(data.autoPan)) props = {...props, autoPan: data.autoPan};\n        if (isset(data.autoPanPaddingTopLeft)) props = {\n            ...props,\n            autoPanPaddingTopLeft: [data.autoPanPaddingTopLeft!.x, data.autoPanPaddingTopLeft!.z]\n        };\n        if (isset(data.autoPanPaddingBottomRight)) props = {\n            ...props,\n            autoPanPaddingBottomRight: [data.autoPanPaddingBottomRight!.x, data.autoPanPaddingBottomRight!.z]\n        };\n        if (isset(data.autoPanPadding)) props = {\n            ...props,\n            autoPanPadding: [data.autoPanPadding!.x, data.autoPanPadding!.z]\n        };\n        if (isset(data.keepInView)) props = {...props, keepInView: data.keepInView};\n        if (isset(data.closeButton)) props = {...props, closeButton: data.closeButton};\n        if (isset(data.autoClose)) props = {...props, autoClose: data.autoClose};\n        if (isset(data.closeOnEscapeKey)) props = {...props, closeOnEscapeKey: data.closeOnEscapeKey};\n        if (isset(data.closeOnClick)) props = {...props, closeOnClick: data.closeOnClick};\n\n        if (isset(data.pane)) {\n            const dom = getOrCreatePane(data.pane!);\n            props = {\n                ...props,\n                pane: dom.className.split(\" \")[1].split(\"-\")[1]\n            };\n        }\n\n        this._properties = props;\n    }\n\n    get content(): string {\n        return this._content;\n    }\n\n    get properties(): L.PopupOptions {\n        return this._properties;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Stroke, StrokeOptions} from \"./Stroke\";\nimport {Fill, FillOptions} from \"./Fill\";\nimport {Tooltip, TooltipOptions} from \"./Tooltip\";\nimport {Popup, PopupOptions} from \"./Popup\";\nimport {isset} from \"../../util/Util\";\n\nexport interface Options {\n    stroke: StrokeOptions;\n    fill: FillOptions;\n    tooltip: TooltipOptions;\n    popup: PopupOptions;\n}\n\nexport class MarkerOptions {\n    private readonly _stroke?: Stroke;\n    private readonly _fill?: Fill;\n    private readonly _tooltip?: Tooltip;\n    private readonly _popup?: Popup;\n\n    constructor(data: Options) {\n        this._stroke = isset(data.stroke) ? new Stroke(data.stroke!) : undefined;\n        this._fill = isset(data.fill) ? new Fill(data.fill!) : undefined;\n        this._tooltip = isset(data.tooltip) ? new Tooltip(data.tooltip!) : undefined;\n        this._popup = isset(data.popup) ? new Popup(data.popup!) : undefined;\n    }\n\n    get properties(): L.PathOptions {\n        return {...this._stroke?.properties, ...this._fill?.properties};\n    }\n\n    get tooltip(): Tooltip | undefined {\n        return this._tooltip;\n    }\n\n    get popup(): Popup | undefined {\n        return this._popup;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Circle} from \"../marker/Circle\";\nimport {Ellipse} from \"../marker/Ellipse\";\nimport {Icon} from \"../marker/Icon\";\nimport {MultiPolygon} from \"../marker/MultiPolygon\";\nimport {MultiPolyline} from \"../marker/MultiPolyline\";\nimport {Polygon} from \"../marker/Polygon\";\nimport {Polyline} from \"../marker/Polyline\";\nimport {Rectangle} from \"../marker/Rectangle\";\nimport {Marker, Type} from \"../marker/Marker\";\nimport {MarkerOptions, Options} from \"../marker/options/MarkerOptions\";\nimport {World} from \"../world/World\";\nimport {fireCustomEvent, getJSON, getOrCreatePane, insertCss, isset, removeCss} from \"../util/Util\";\n\ninterface MarkerData {\n    type: string;\n    data: unknown[];\n    options: Options;\n}\n\nexport class MarkerLayer extends L.LayerGroup {\n    private static readonly TYPES = {\n        \"circ\": (type: Type) => new Circle(type),\n        \"elli\": (type: Type) => new Ellipse(type),\n        \"icon\": (type: Type) => new Icon(type),\n        \"multipoly\": (type: Type) => new MultiPolygon(type),\n        \"multiline\": (type: Type) => new MultiPolyline(type),\n        \"poly\": (type: Type) => new Polygon(type),\n        \"line\": (type: Type) => new Polyline(type),\n        \"rect\": (type: Type) => new Rectangle(type)\n    }\n\n    declare options: L.LayerOptions;\n\n    private readonly _key: string;\n    private readonly _label: string;\n    private readonly _updateInterval: number;\n    private readonly _showControls: boolean;\n    private readonly _defaultHidden: boolean;\n    private readonly _priority: number;\n    private readonly _zIndex: number;\n    private readonly _pane: string;\n    private readonly _css: string;\n\n    private readonly _markers: Map<string, Marker> = new Map();\n\n    private _timer: NodeJS.Timeout | undefined;\n\n    constructor(key: string, label: string, interval: number, showControls: boolean, defaultHidden: boolean, priority: number, zIndex: number, pane: string, css: string) {\n        super(undefined, {\n            attribution: undefined\n        });\n        this._key = key;\n        this._label = label;\n        this._updateInterval = (interval < 1 ? 1 : interval) * 1000;\n        this._showControls = showControls;\n        this._defaultHidden = defaultHidden;\n        this._priority = priority;\n        this._zIndex = zIndex;\n        this._pane = pane;\n        this._css = css;\n\n        this.setZIndex(zIndex);\n\n        if (isset(pane)) {\n            const dom = getOrCreatePane(pane);\n            dom.style.zIndex = String(zIndex);\n            this.options.pane = dom.className.split(\"-\")[1];\n        }\n\n        if (isset(css)) {\n            insertCss(css, key);\n        }\n\n        fireCustomEvent(\"overlayadded\", this);\n    }\n\n    get key(): string {\n        return this._key;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get updateInterval(): number {\n        return this._updateInterval;\n    }\n\n    get showControls(): boolean {\n        return this._showControls;\n    }\n\n    get defaultHidden(): boolean {\n        return this._defaultHidden;\n    }\n\n    get priority(): number {\n        return this._priority;\n    }\n\n    get zIndex(): number {\n        return this._zIndex;\n    }\n\n    get pane(): string {\n        return this._pane;\n    }\n\n    get css(): string {\n        return this._css;\n    }\n\n    update(world: World): void {\n        //console.log(\"Update markers: \" + this._name + \" \" + this._world.name);\n\n        getJSON(`tiles/${world.name}/markers/${this._key}.json`)\n            .then((json) => {\n                //this.clearLayers();\n                const toRemove: Set<string> = new Set(this._markers.keys());\n\n\n                for (const index in Object.keys(json)) {\n                    const existing = this._markers.get(json[index].data.key);\n                    if (existing) {\n                        // update\n                        const data = json[index];\n                        const options = isset(data.options) ? new MarkerOptions(data.options) : undefined;\n                        existing.update(data.data, options);\n                        // do not remove this marker\n                        toRemove.delete(existing.key);\n                    } else {\n                        // new marker\n                        const marker = this.parseMarker(json[index]);\n                        if (marker) {\n                            this._markers.set(marker.key, marker);\n                            marker.marker.addTo(this);\n                            // inform the events\n                            fireCustomEvent('markeradded', marker);\n                        }\n                    }\n                }\n\n                toRemove.forEach(key => {\n                    // remove players not in updated settings file\n                    const marker = this._markers.get(key);\n                    if (marker) {\n                        this._markers.delete(key);\n                        marker.marker.remove();\n                        fireCustomEvent('markerremoved', marker);\n                    }\n                });\n\n                this._timer = setTimeout(() => this.update(world), this._updateInterval);\n            });\n    }\n\n    unload(): void {\n        clearTimeout(this._timer);\n        removeCss(this._key);\n        this.clearLayers();\n        this.removeFrom(Pl3xMap.instance.map);\n        fireCustomEvent(\"overlayremoved\", this);\n    }\n\n    private parseMarker(data: MarkerData): Marker | undefined {\n        const options = isset(data.options) ? new MarkerOptions(data.options) : undefined;\n\n        const type = MarkerLayer.TYPES[data.type as keyof typeof MarkerLayer.TYPES];\n        const marker = type ? type(new Type(data.data as unknown[], options)) : undefined;\n\n        if (marker?.marker) {\n            const popup = options?.popup;\n            const tooltip = options?.tooltip;\n            if (popup) {\n                marker.marker.bindPopup(() => popup.content, popup.properties);\n            }\n            if (tooltip) {\n                marker.marker.bindTooltip(() => tooltip.content, tooltip.properties);\n            }\n        }\n\n        return marker;\n    }\n}\n","export class Block {\n    private readonly _block: number;\n    private readonly _biome: number;\n    private readonly _yPos: number;\n    private readonly _minY: number;\n\n    constructor(packed: number, minY: number) {\n        this._block = packed >>> 22;\n        this._biome = (packed << 10) >> 22;\n        this._yPos = ((packed << 20) >> 20);\n        this._minY = minY;\n    }\n\n    get block(): number {\n        return this._block;\n    }\n\n    get biome(): number {\n        return this._biome;\n    }\n\n    get yPos(): number {\n        return this._yPos + this._minY;\n    }\n}\n","import {Block} from \"./Block\";\n\nexport class BlockInfo {\n    private readonly _data: Uint8Array;\n\n    constructor(data: Uint8Array) {\n        this._data = data;\n    }\n\n    get minY(): number {\n        return this.getInt(8);\n    }\n\n    getBlock(index: number): Block {\n        return new Block(this.getInt(12 + index * 4), this.minY);\n    }\n\n    private getInt(position: number): number {\n        let val: number = 0;\n        for (let i: number = 0; i < 4; i++) {\n            val |= (this._data[position + i] & 0xFF) << (i * 8);\n        }\n        return val;\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Label} from \"../settings/Lang\";\nimport {Renderer, World} from \"../world/World\";\n\nexport class ReversedZoomTileLayer extends L.TileLayer {\n    private readonly _world: World;\n    private readonly _renderer: Label;\n\n    constructor(pl3xmap: Pl3xMap, world: World, renderer: Renderer) {\n        super(`tiles/${world.name}/{z}/${renderer.label}/{x}_{y}.${pl3xmap.settings?.format}`, {\n            // tile sizes match regions sizes (512 blocks x 512 blocks)\n            tileSize: 512,\n            // dont wrap tiles at edges\n            noWrap: true,\n            // the closest zoomed in possible (without stretching)\n            // this is always 0. no exceptions!\n            minNativeZoom: 0,\n            // the farthest possible zoom out possible\n            maxNativeZoom: world.zoom.maxOut,\n            // for extra zoom in, make higher than maxNativeZoom\n            // this is the stretched tiles to zoom in further\n            maxZoom: world.zoom.maxOut + world.zoom.maxIn,\n            // we need to counter effect the higher maxZoom here\n            // maxZoom + zoomOffset = maxNativeZoom\n            zoomOffset: -world.zoom.maxIn\n        });\n\n        this._world = world!;\n        this._renderer = renderer;\n\n        // when tiles load we need to load extra block info\n        this.addEventListener(\"tileload\", (event) => {\n            const zoom: number = world.settings.zoom.maxOut - event.coords.z;\n            world.loadBlockInfo(zoom, event.coords.x, event.coords.y);\n        });\n\n        // when tiles unload we need to remove the extra block info from memory\n        this.addEventListener(\"tileunload\", (event) => {\n            const zoom: number = world.settings.zoom.maxOut - event.coords.z;\n            world.unsetBlockInfo(zoom, event.coords.x, event.coords.y);\n        });\n\n        // push this layer to the back (leaflet defaults it to 1)\n        this.setZIndex(0);\n    }\n\n    get world(): World {\n        return this._world;\n    }\n\n    get renderer(): Label {\n        return this._renderer;\n    }\n\n    _getZoomForUrl(): number {\n        const zoom = this._tileZoom!,\n            maxZoom = this.options.maxZoom!,\n            offset = this.options.zoomOffset!;\n        return (maxZoom - zoom) + offset;\n    }\n\n    // @method createTile(coords: Object, done?: Function): HTMLElement\n    // Called only internally, overrides GridLayer's [`createTile()`](#gridlayer-createtile)\n    // to return an `<img>` HTML element with the appropriate image URL given `coords`. The `done`\n    // callback is called when the tile has been loaded.\n    createTile(coords: L.Coords, done: L.DoneCallback) {\n        const tile = L.DomUtil.create('img');\n\n        L.DomEvent.on(tile, 'load', () => {\n            // Once image has loaded revoke the object URL as we don't need it anymore\n            URL.revokeObjectURL(tile.src);\n            this._tileOnLoad(done, tile)\n        });\n        L.DomEvent.on(tile, 'error', L.Util.bind(this._tileOnError, this, done, tile));\n\n        if (this.options.crossOrigin || this.options.crossOrigin === '') {\n            tile.crossOrigin = this.options.crossOrigin === true ? '' : this.options.crossOrigin;\n        }\n\n        tile.alt = '';\n        tile.setAttribute('role', 'presentation');\n\n        // Retrieve image via a fetch instead of just setting the src\n        // This works around the fact that browsers usually don't make a request for an image that was previously loaded,\n        // without resorting to changing the URL (which would break caching).\n        fetch(this.getTileUrl(coords))\n            .then(res => {\n                // Call leaflet's error handler if request fails for some reason\n                if (!res.ok) {\n                    this._tileOnError(done, tile, new Error(res.statusText));\n                    return;\n                }\n\n                // Get image data and convert into object URL so it can be used as a src\n                // Leaflet's onload listener will take it from here\n                res.blob().then(blob => {\n                    // don't use URL.createObjectURL, it creates memory leak\n                    const reader = new FileReader();\n                    reader.readAsDataURL(blob);\n                    reader.onload = () => tile.src = String(reader.result);\n                });\n            }).catch((e) => this._tileOnError(done, tile, e));\n\n        return tile;\n    }\n}\n","import {Pl3xMap} from \"../Pl3xMap\";\nimport {Renderer, World} from \"../world/World\";\nimport {ReversedZoomTileLayer} from \"./ReversedZoomTileLayer\";\nimport Pl3xMapLeafletMap from \"../map/Pl3xMapLeafletMap\";\n\nexport class DoubleTileLayer {\n    private readonly _tileLayer1: ReversedZoomTileLayer;\n    private readonly _tileLayer2: ReversedZoomTileLayer;\n\n    // start with 0. from here will switch to 1 then 2 then 1 then 2 etc.\n    private _currentLayer: number = 0;\n\n    constructor(pl3xmap: Pl3xMap, world: World, renderer: Renderer) {\n        // we need 2 tile layers to swap between for seamless refreshing\n        this._tileLayer1 = this.createTileLayer(pl3xmap, world, renderer);\n        this._tileLayer2 = this.createTileLayer(pl3xmap, world, renderer);\n    }\n\n    private createTileLayer(pl3xmap: Pl3xMap, world: World, renderer: Renderer): ReversedZoomTileLayer {\n        return new ReversedZoomTileLayer(pl3xmap, world, renderer)\n            .addEventListener(\"load\", () => {\n                // when all tiles in this layer are loaded, switch to this layer\n                this.switchTileLayer();\n            });\n    }\n\n    private switchTileLayer(): void {\n        // swap current tile layer\n        if (this._currentLayer == 1) {\n            this._tileLayer1.setZIndex(0);\n            this._tileLayer2.setZIndex(1);\n            this._currentLayer = 2;\n        } else {\n            this._tileLayer1.setZIndex(1);\n            this._tileLayer2.setZIndex(0);\n            this._currentLayer = 1;\n        }\n    }\n\n    public updateTileLayer(): void {\n        // redraw opposite tile layer\n        // it will switch to it when all tiles load\n        if (this._currentLayer == 1) {\n            this._tileLayer2.redraw();\n        } else {\n            this._tileLayer1.redraw();\n        }\n    }\n\n    public addTo(map: Pl3xMapLeafletMap): void {\n        this._tileLayer1.addTo(map);\n        this._tileLayer2.addTo(map);\n    }\n\n    public remove(): void {\n        this._tileLayer1.remove();\n        this._tileLayer2.remove();\n    }\n}\n","import {Pl3xMap} from \"../Pl3xMap\";\nimport {MarkerLayer} from \"../layergroup/MarkerLayer\";\nimport {BlockInfo} from \"../palette/BlockInfo\";\nimport {Palette} from \"../palette/Palette\";\nimport {Label} from \"../settings/Lang\";\nimport {Spawn, WorldSettings, Zoom} from \"../settings/WorldSettings\";\nimport {DoubleTileLayer} from \"../tilelayer/DoubleTileLayer\";\nimport {WorldManager} from \"./WorldManager\";\nimport {fireCustomEvent, getBytes, getJSON} from \"../util/Util\";\n\n/**\n * Represents a loaded world.\n */\nexport class World {\n    private readonly _pl3xmap: Pl3xMap;\n    private readonly _settings: WorldSettings;\n\n    private _currentRenderer?: Renderer;\n    private _currentRendererLayer?: DoubleTileLayer;\n\n    private _rendererLayers: Map<Renderer, DoubleTileLayer> = new Map();\n    private _markerLayers: MarkerLayer[] = [];\n\n    private _biomePalette: Map<number, string> = new Map();\n    private _blockInfo: Map<number, Map<string, BlockInfo>> = new Map();\n\n    private _loaded = false;\n\n    private _timer: NodeJS.Timeout | undefined;\n\n    constructor(pl3xmap: Pl3xMap, worldManager: WorldManager, settings: WorldSettings) {\n        this._pl3xmap = pl3xmap;\n        this._settings = settings;\n    }\n\n    public load(): Promise<World> {\n        if (this._loaded) {\n            return Promise.resolve(this);\n        }\n\n        getJSON(`tiles/${this.name}/biomes.gz`)\n            .then((palettes: Palette[]) => {\n                for (const [index, biome] of Object.entries(palettes)) {\n                    this.biomePalette.set(Number(index), String(biome)\n                        .split(\".\").pop()!        // everything after the last period\n                        .replace(/_+/g, ' ')      // replace underscores with spaces\n                        .replace(/\\w\\S*/g, (w) => // capitalize first letter of every word\n                            w.charAt(0).toUpperCase() + w.substring(1)\n                        )\n                    );\n                }\n            });\n\n        //TODO: Handle errors\n        return new Promise((resolve) => {\n            getJSON(`tiles/${this.name}/settings.json`)\n                .then((settings: WorldSettings) => {\n                    this._loaded = true;\n\n                    // copy settings values\n                    this.settings.spawn = settings.spawn;\n                    this.settings.zoom = settings.zoom;\n                    this.settings.tileUpdateInterval = settings.tileUpdateInterval;\n                    this.settings.ui = settings.ui;\n\n                    // setup renderers\n                    for (const renderer of this.settings.renderers) {\n                        this._rendererLayers.set(renderer, new DoubleTileLayer(this._pl3xmap, this, renderer));\n                    }\n\n                    resolve(this);\n                });\n        });\n    }\n\n    public unload(): void {\n        clearTimeout(this._timer);\n        // unload and clear markers\n        this._markerLayers.forEach(layer => layer.unload())\n        this._markerLayers = [];\n        // unload renderer layer\n        this._currentRendererLayer?.remove();\n        this._currentRendererLayer = undefined;\n        this._currentRenderer = undefined;\n    }\n\n    public loadMarkers() {\n        getJSON(`tiles/${this.name}/markers.json`)\n            .then((json) => {\n                (json as MarkerLayer[]).forEach((layer) => {\n                    const markerLayer = new MarkerLayer(layer.key, layer.label, layer.updateInterval, layer.showControls, layer.defaultHidden, layer.priority, layer.zIndex, layer.pane, layer.css);\n                    this._markerLayers.push(markerLayer);\n                    markerLayer.update(this);\n                });\n            });\n    }\n\n    public loadBlockInfo(zoom: number, x: number, z: number) {\n        if (!this.settings.ui.blockinfo) {\n            return;\n        }\n        getBytes(`tiles/${this.name}/${zoom}/blockinfo/${x}_${z}.pl3xmap.gz`)\n            .then((buffer?: ArrayBuffer) => {\n                this.setBlockInfo(zoom, x, z, buffer);\n            });\n    }\n\n    public getBlockInfo(zoom: number, x: number, z: number): BlockInfo | undefined {\n        return this.blockInfo.get(zoom < 0 ? 0 : zoom)?.get(`${x}_${z}`);\n    }\n\n    public setBlockInfo(zoom: number, x: number, z: number, buffer?: ArrayBuffer) {\n        let infoMap = this.blockInfo.get(zoom < 0 ? 0 : zoom);\n        if (infoMap == undefined) {\n            infoMap = new Map<string, BlockInfo>();\n            this.blockInfo.set(zoom, infoMap);\n        }\n\n        const blockInfo = buffer == undefined ? null : new BlockInfo(new Uint8Array(buffer));\n\n        if (blockInfo == null) {\n            infoMap.delete(`${x}_${z}`);\n        } else {\n            infoMap.set(`${x}_${z}`, blockInfo);\n        }\n    }\n\n    public unsetBlockInfo(zoom: number, x: number, z: number) {\n        this.blockInfo.get(zoom)?.delete(`${x}_${z}`);\n    }\n\n    public getRendererLayer(renderer: Renderer): DoubleTileLayer | undefined {\n        return this._rendererLayers.get(renderer);\n    }\n\n    get currentRendererLayer(): DoubleTileLayer | undefined {\n        return this._currentRendererLayer;\n    }\n\n    get currentRenderer(): Renderer | undefined {\n        return this._currentRenderer;\n    }\n\n    public setRenderer(renderer: Renderer | string): void {\n        clearTimeout(this._timer);\n\n        if (!(renderer instanceof Renderer)) {\n            for (const label of this.renderers) {\n                if (label.label == renderer) {\n                    renderer = label;\n                }\n            }\n        }\n\n        this._currentRendererLayer?.remove();\n        this._currentRenderer = this.settings.renderers.indexOf(renderer as Renderer) > -1 ? renderer as Renderer : this.settings.renderers[0];\n        this._currentRendererLayer = this._rendererLayers.get(this._currentRenderer);\n        this._currentRendererLayer!.addTo(this._pl3xmap.map);\n\n        this.tick();\n\n        fireCustomEvent('rendererselected', this);\n    }\n\n    public resetRenderer(renderer?: Renderer | string): void {\n        this.setRenderer(renderer ?? this.settings.renderers[0]);\n    }\n\n    get settings(): WorldSettings {\n        return this._settings;\n    }\n\n    get name(): string {\n        return this.settings.name;\n    }\n\n    get displayName(): string {\n        return this.settings.displayName;\n    }\n\n    get type(): string {\n        return this.settings.type;\n    }\n\n    get order(): number {\n        return this.settings.order;\n    }\n\n    get renderers(): Renderer[] {\n        return this.settings.renderers;\n    }\n\n    get spawn(): Spawn {\n        return this.settings.spawn;\n    }\n\n    get zoom(): Zoom {\n        return this.settings.zoom;\n    }\n\n    get markerLayers(): MarkerLayer[] {\n        return this._markerLayers;\n    }\n\n    get blockInfo(): Map<number, Map<string, BlockInfo>> {\n        return this._blockInfo;\n    }\n\n    get biomePalette(): Map<number, string> {\n        return this._biomePalette;\n    }\n\n    get background(): string {\n        switch (this.type) {\n            case \"nether\":\n                return \"url('images/sky/nether.png')\";\n            case \"the_end\":\n                return \"url('images/sky/the_end.png')\";\n            case \"normal\":\n            default:\n                return \"url('images/sky/overworld.png')\";\n        }\n    }\n\n    private tick(): void {\n        this.currentRendererLayer?.updateTileLayer();\n        this._timer = setTimeout(() => this.tick(), this.settings.tileUpdateInterval * 1000);\n    }\n}\n\nexport class Renderer extends Label {\n    private readonly _icon: string;\n\n    constructor(label: string, value: string, icon: string) {\n        super(label, value);\n        this._icon = icon;\n    }\n\n    get icon(): string {\n        return this._icon;\n    }\n}\n","/**\n * Represents language settings.\n */\nexport class Lang {\n    private readonly _title: string;\n    private readonly _coords: Label;\n    private readonly _blockInfo: Label;\n    private readonly _layers: Label;\n    private readonly _link: Label;\n    private readonly _markers: Label;\n    private readonly _players: Label;\n    private readonly _worlds: Label;\n\n    constructor(title: string, coords: Label, blockInfo: Label, layers: Label, link: Label, markers: Label, players: Label, worlds: Label) {\n        this._title = title;\n        this._coords = coords;\n        this._blockInfo = blockInfo;\n        this._layers = layers;\n        this._link = link;\n        this._markers = markers;\n        this._players = players;\n        this._worlds = worlds;\n    }\n\n    get title(): string {\n        return this._title;\n    }\n\n    get coords(): Label {\n        return this._coords;\n    }\n\n    get blockInfo(): Label {\n        return this._blockInfo;\n    }\n\n    get layers(): Label {\n        return this._layers;\n    }\n\n    get link(): Label {\n        return this._link;\n    }\n\n    get markers(): Label {\n        return this._markers;\n    }\n\n    get players(): Label {\n        return this._players;\n    }\n\n    get worlds(): Label {\n        return this._worlds;\n    }\n}\n\n/**\n * Represents a label and value.\n */\nexport class Label {\n    private readonly _label: string\n    private readonly _value: string;\n\n    constructor(label: string, value: string) {\n        this._label = label;\n        this._value = value;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get value(): string {\n        return this._value;\n    }\n}\n","import {Pl3xMap} from \"../Pl3xMap\";\nimport {BlockInfoControl} from \"../control/BlockInfoControl\";\nimport {CoordsControl} from \"../control/CoordsControl\";\nimport {LinkControl} from \"../control/LinkControl\";\nimport {Settings} from \"../settings/Settings\";\nimport {Renderer, World} from \"./World\";\nimport {fireCustomEvent, getUrlParam} from \"../util/Util\";\n\n/**\n * The world manager. Manages all loaded worlds.\n */\nexport class WorldManager {\n    private readonly _pl3xmap: Pl3xMap;\n\n    private _worlds: Map<string, World> = new Map();\n    private _currentWorld?: World;\n\n    constructor(pl3xmap: Pl3xMap) {\n        this._pl3xmap = pl3xmap;\n    }\n\n    public async init(settings: Settings) {\n        // build world objects\n        const worlds = [];\n        for (const worldSettings of settings.worldSettings) {\n            const world = new World(this._pl3xmap, this, worldSettings);\n            worlds.push(world);\n        }\n\n        // sort and store worlds\n        worlds.sort((w1, w2) => w1.settings.order - w2.settings.order).forEach(world => {\n            this._worlds.set(world.name, world);\n            fireCustomEvent('worldadded', world);\n        });\n\n        // get world name from url, or first world from settings\n        const worldName: string = getUrlParam('world', this._worlds.keys().next().value);\n\n        // load world\n        const world = this._worlds.get(worldName);\n        if (world) {\n            await this.setWorld(world, getUrlParam('renderer', undefined));\n        }\n    }\n\n    get currentWorld(): World | undefined {\n        return this._currentWorld;\n    }\n\n    public getWorld(world: string): World | undefined {\n        return this._worlds.get(world);\n    }\n\n    public async setWorld(world: World, renderer?: Renderer | string, resetCoords?: boolean): Promise<void> {\n        return world.load().then(() => {\n            if (world === this._currentWorld && renderer === this._currentWorld.currentRenderer) {\n                return;\n            }\n\n            if (world !== this._currentWorld) {\n                this._currentWorld?.unload();\n                this._currentWorld = world;\n                world.loadMarkers();\n                fireCustomEvent('worldselected', world);\n                document.getElementById(\"map\")!.style.background = world.background;\n            }\n\n            world.resetRenderer(renderer);\n\n            this._pl3xmap.map.centerOn(\n                resetCoords ? world.spawn.x : getUrlParam('x', world.spawn.x),\n                resetCoords ? world.spawn.z : getUrlParam('z', world.spawn.z),\n                resetCoords ? world.zoom.default : getUrlParam('zoom', world.zoom.default)\n            );\n\n            const ui = world.settings.ui;\n            this._pl3xmap.controlManager.linkControl = ui.link ? new LinkControl(this._pl3xmap, ui.link) : undefined;\n            this._pl3xmap.controlManager.coordsControl = ui.coords ? new CoordsControl(this._pl3xmap, ui.coords) : undefined;\n            this._pl3xmap.controlManager.blockInfoControl = ui.blockinfo ? new BlockInfoControl(this._pl3xmap, ui.blockinfo) : undefined;\n\n            const attributeDom = this._pl3xmap.map.attributionControl.getContainer();\n            if (attributeDom) {\n                attributeDom.style.display = ui.attribution ? \"inline-block\" : \"none\";\n            }\n        });\n    }\n}\n","import SpriteSymbol from \"../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon--layers\",\n  \"use\": \"icon--layers-usage\",\n  \"viewBox\": \"0 0 234.46 247.78\",\n  \"content\": \"<symbol viewBox=\\\"0 0 234.46 247.78\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"icon--layers\\\"><path d=\\\"m130.947 2.453 100.256 70.392c4.44 3.118 4.327 7.968-.254 10.876l-111.155 70.56c-4.58 2.908-11.842 2.739-16.282-.379L3.257 83.51c-4.44-3.117-4.327-7.968.253-10.875l111.155-70.56c4.58-2.908 11.842-2.74 16.282.378z\\\" /><path d=\\\"M217.846 154.897 119.79 217.14c-4.58 2.907-11.843 2.738-16.283-.38l-86.895-61.013-13.104 8.317c-4.58 2.908-4.693 7.757-.253 10.875l100.252 70.393c4.44 3.117 11.703 3.285 16.284.378l111.157-70.559c4.58-2.907 4.694-7.759.254-10.876z\\\" /><path d=\\\"m217.846 109.185-98.048 62.24c-4.58 2.908-11.843 2.739-16.283-.378L16.62 110.033 3.517 118.35c-4.58 2.908-4.694 7.759-.254 10.877l100.253 70.39c4.44 3.118 11.703 3.288 16.283.38l111.158-70.56c4.58-2.907 4.693-7.757.253-10.875z\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {SidebarTab} from \"../control/SidebarControl\";\nimport {MarkerLayer} from \"../layergroup/MarkerLayer\";\nimport {createSVGIcon} from \"../util/Util\";\nimport '../svg/layers.svg';\n\ninterface LayerControlInput extends HTMLInputElement {\n    layerId: number;\n}\n\ninterface LayerListItem {\n    layer: L.Layer;\n    name: string;\n}\n\nexport default class LayersTab extends L.Control.Layers implements SidebarTab {\n    declare protected _map: L.Map;\n\n    declare protected _layerControlInputs: HTMLInputElement[];\n\n    declare protected _layers: LayerListItem[];\n    declare protected _onInputClick: (e: Event) => void;\n    declare protected _checkDisabledLayers: () => void;\n\n    protected _pl3xmap: Pl3xMap;\n    protected _button: HTMLButtonElement = L.DomUtil.create('button');\n    protected _content: HTMLDivElement = L.DomUtil.create('div');\n\n    protected _skeleton: HTMLParagraphElement = L.DomUtil.create('p');\n    protected _container: HTMLDivElement = L.DomUtil.create('div');\n    protected _list: HTMLFieldSetElement = L.DomUtil.create('fieldset', 'menu');\n\n    constructor(pl3xmap: Pl3xMap) {\n        super({}, {}, {\n            hideSingleBase: true,\n            sortLayers: true,\n            sortFunction: (layer1, layer2, name1, name2) => {\n                if (layer1 instanceof MarkerLayer && layer2 instanceof MarkerLayer) {\n                    const diff = layer1.priority - layer2.priority;\n                    if (diff !== 0) {\n                        return diff;\n                    }\n                    name1 = layer1.label;\n                    name2 = layer2.label;\n                }\n                return name1 < name2 ? -1 : (name2 < name1 ? 1 : 0);\n            }\n        });\n\n        this._pl3xmap = pl3xmap;\n\n        this._button.type = 'button';\n        this._button.setAttribute('aria-expanded', 'false');\n        this._button.setAttribute('aria-controls', `sidebar__layers`);\n        this._button.appendChild(createSVGIcon('layers'));\n        this._button.setAttribute('aria-label', pl3xmap.settings!.lang.layers.label);\n        this._button.title = pl3xmap.settings!.lang.layers.label;\n\n        this._content.hidden = true;\n        this._content.id = `sidebar__layers`;\n        this._content.setAttribute('aria-hidden', 'true');\n\n        this.initEvents();\n    }\n\n    private initEvents() {\n        window.addEventListener('overlayadded', (e) => {\n            if (e.detail.showControls) {\n                this.addOverlay(e.detail, e.detail.label);\n            }\n            if (!e.detail.defaultHidden) {\n                e.detail.addTo(this._map);\n            }\n            this._update();\n        });\n\n        window.addEventListener('overlayremoved', (e) => {\n            this.removeLayer(e.detail);\n            this._update();\n        });\n\n        window.addEventListener('worldselected', () => {\n            this._layers = [];\n            this._update();\n        });\n    }\n\n    private _initLayout() {\n        const heading = L.DomUtil.create('h2', '', this._content);\n        heading.innerText = this._pl3xmap.settings!.lang.layers.label;\n        heading.id = 'layers-heading';\n\n        this._skeleton.innerText = this._pl3xmap.settings!.lang.layers.value;\n        this._skeleton.id = 'layers-skeleton';\n        this._skeleton.tabIndex = -1;\n\n        this._list.setAttribute('aria-labelledby', 'overlay-layers-heading');\n        this._list.setAttribute('role', 'listbox');\n\n        this._container.appendChild(this._list);\n\n        this._content.appendChild(this._skeleton);\n        this._content.appendChild(this._container);\n    }\n\n    private _update() {\n        if (!this._map) {\n            return this;\n        }\n\n        L.DomUtil.empty(this._list);\n\n        this._layerControlInputs = [];\n\n        for (const layer of this._layers) {\n            this._addItem(layer);\n        }\n\n        const hasLayers = this._layers.length > 0;\n        this._container.hidden = !hasLayers;\n        this._skeleton.hidden = hasLayers;\n\n        return this;\n    }\n\n    private _addItem(layer: LayerListItem) {\n        const label = L.DomUtil.create('label'),\n            input = L.DomUtil.create('input') as LayerControlInput;\n\n        input.type = 'checkbox';\n        input.name = 'overlays';\n        input.layerId = L.Util.stamp(layer.layer);\n        input.id = label.htmlFor = `overlay-${input.layerId}`;\n        input.defaultChecked = this._map.hasLayer(layer.layer);\n\n        this._layerControlInputs.push(input);\n\n        L.DomEvent.on(input, 'click', this._onInputClick, this);\n\n        label.innerText = layer.name;\n\n        this._list.appendChild(input);\n        this._list.appendChild(label);\n\n        this._checkDisabledLayers();\n        return label;\n    }\n\n    expand(): this {\n        //Do nothing\n        return this;\n    }\n\n    collapse(): this {\n        //Do nothing\n        return this;\n    }\n\n    onActivate() {\n        if (!this._container.hidden) {\n            (this._list.querySelector('input') as HTMLElement)!.focus();\n        } else {\n            this._skeleton.focus();\n        }\n    }\n\n    get button(): HTMLElement {\n        return this._button;\n    }\n\n    get content(): HTMLElement {\n        return this._content;\n    }\n\n    get id(): string {\n        return 'layers';\n    }\n}\n","import * as L from \"leaflet\";\nimport {SidebarTab} from \"../control/SidebarControl\";\nimport {Pl3xMap} from \"../Pl3xMap\";\n\nexport default class BaseTab implements SidebarTab {\n    protected readonly _pl3xmap: Pl3xMap;\n    protected readonly _button: HTMLButtonElement = L.DomUtil.create('button');\n    protected readonly _content: HTMLDivElement = L.DomUtil.create('div');\n    protected readonly _id: string;\n\n    constructor(pl3xmap: Pl3xMap, id: string) {\n        this._pl3xmap = pl3xmap;\n        this._id = id;\n\n        this._button.type = 'button';\n        this._button.setAttribute('aria-expanded', 'false');\n        this._button.setAttribute('aria-controls', `sidebar__${this._id}`);\n\n        this._content.hidden = true;\n        this._content.id = `sidebar__${this._id}`;\n        this._content.setAttribute('aria-hidden', 'true');\n    }\n\n    get button(): HTMLElement {\n        return this._button;\n    }\n\n    get content(): HTMLElement {\n        return this._content;\n    }\n\n    get id(): string {\n        return this._id;\n    }\n\n    onActivate() {\n        if (this._content.children.length) {\n            const focusTarget = (this._content.firstElementChild as HTMLElement);\n            focusTarget.tabIndex = -1;\n            focusTarget.focus();\n        }\n    }\n}\n","import SpriteSymbol from \"../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon--players\",\n  \"use\": \"icon--players-usage\",\n  \"viewBox\": \"0 0 258.05 271.18\",\n  \"content\": \"<symbol viewBox=\\\"0 0 258.05 271.18\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"icon--players\\\"><path transform=\\\"scale(.75)\\\" d=\\\"M115.9.336c-38.033 0-68.865 31.036-68.865 69.32 0 33.275 23.296 61.06 54.363 67.766 5.86-43.301 38.447-78.411 80.457-87.72C173.34 21.149 147.041.337 115.9.337z\\\" /><path d=\\\"M95.745 173.72c-2.582 0-4.277 1.426-7.451 3.963-6.024 4.835-13.794 12.383-17.453 16.954-9.996 12.49-17.467 29.232-20.862 46.753-1.88 9.697-2.612 23.496-1.355 25.53 1.462 2.365 6.553 4.245 14.492 4.245 60.371.021 124.23.005 179.81 0 7.94 0 13.03-1.88 14.492-4.245 1.257-2.034.525-15.833-1.354-25.53-3.395-17.52-10.866-34.264-20.862-46.753-3.658-4.57-11.43-12.12-17.453-16.954-3.174-2.537-4.868-3.963-7.45-3.963-1.49 0-3.196 1.051-5.583 2.9-14.03 11.747-32.038 18.837-51.695 18.918-19.657-.081-37.665-7.172-51.695-18.918-2.389-1.849-4.095-2.9-5.584-2.9z\\\" /><g stroke-width=\\\".921\\\"><path d=\\\"M206.11 77.176c0 42.623-34.327 77.176-76.671 77.176-42.344 0-76.671-34.553-76.671-77.176C52.768 34.553 87.095 0 129.439 0c42.344 0 76.671 34.553 76.671 77.176\\\" transform=\\\"translate(47.674 50.748) scale(.81399)\\\" /><path d=\\\"M129.44-.375c-42.548 0-77.045 34.726-77.045 77.551 0 42.824 34.497 77.551 77.045 77.551s77.047-34.726 77.047-77.551S171.988-.375 129.44-.375zm0 .75c42.14 0 76.297 34.379 76.297 76.801 0 42.422-34.157 76.801-76.297 76.801s-76.295-34.379-76.295-76.801C53.145 34.754 87.3.375 129.44.375z\\\" transform=\\\"translate(47.674 50.748) scale(.81399)\\\" /></g><path transform=\\\"scale(.75)\\\" d=\\\"M52.684 136.03c-2.85 0-4.718 1.573-8.22 4.373-6.647 5.334-15.222 13.665-19.259 18.709-11.03 13.781-19.273 32.255-23.02 51.588C.112 221.4-.698 236.628.69 238.872c1.613 2.61 7.232 4.684 15.992 4.684 21.846.008 42.85-.001 65.066 0 6.605-7.58 15.31-15.7 23.461-22.242l.012-.012.016-.014c2.044-1.635 4.034-3.417 7.6-5.517 1.973-1.163 4.658-2.296 7.571-3.086-11.19-15.375-18.287-33.905-19.69-53.941-15.745-2.765-30.084-9.644-41.872-19.514-2.635-2.04-4.516-3.2-6.16-3.2z\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Player} from \"../player/Player\";\nimport {createSVGIcon, handleKeyboardEvent, isset} from \"../util/Util\";\nimport BaseTab from \"./BaseTab\";\nimport '../svg/players.svg';\n\ninterface PlayerListItem {\n    input: HTMLInputElement;\n    label: HTMLLabelElement;\n}\n\nexport default class PlayersTab extends BaseTab {\n    private readonly _players: Map<Player, PlayerListItem> = new Map();\n    private readonly _skeleton: HTMLParagraphElement;\n    private readonly _list: HTMLFieldSetElement;\n    private readonly _heading: HTMLHeadingElement;\n\n    constructor(pl3xmap: Pl3xMap) {\n        super(pl3xmap, 'players');\n\n        const lang = pl3xmap.settings!.lang;\n\n        this._button.appendChild(createSVGIcon('players'));\n        this._button.setAttribute('aria-label', lang.worlds.label);\n        this._button.title = lang.players.label;\n\n        this._heading = L.DomUtil.create('h2', '', this._content);\n        this._heading.innerText = lang.players.label;\n        this._heading.id = 'players-heading';\n\n        this._skeleton = L.DomUtil.create('p', '', this._content);\n        this._skeleton.innerText = lang.players.value;\n        this._skeleton.tabIndex = -1;\n\n        this._list = L.DomUtil.create('fieldset', 'menu', this._content);\n        this._list.setAttribute('aria-labelledby', 'players-heading');\n        this._list.setAttribute('role', 'radiogroup');\n\n        this.initEvents();\n\n        this._update();\n    }\n\n    private initEvents() {\n        addEventListener('playeradded', (e: CustomEvent<Player>) => {\n            this.createListItem(e.detail);\n            this._update();\n        });\n        addEventListener('playerremoved', (e: CustomEvent<Player>) => {\n            this.removeListItem(e.detail);\n            this._update();\n        });\n        addEventListener('followplayer', (e: CustomEvent<Player>) => {\n            this._players.forEach((item: PlayerListItem, player: Player) => {\n                item.input.checked = player === e.detail;\n            });\n        });\n\n        this._list.addEventListener('keydown', (e: KeyboardEvent) =>\n            handleKeyboardEvent(e, Array.from(this._list.elements) as HTMLElement[]))\n    }\n\n    private _update(): void {\n        const settings = this._pl3xmap.settings;\n\n        const online = String(isset(settings?.players) ? Object.keys(settings!.players).length : '???');\n        const max = String(settings?.maxPlayers ?? '???');\n\n        const title = settings?.lang.players?.label\n                .replace('<online>', online)\n                .replace('<max>', max)\n            ?? 'Players';\n\n        this._heading.innerText = title;\n        this._button.title = title;\n    }\n\n    private createListItem(player: Player) {\n        const input = L.DomUtil.create('input', 'players'),\n            label = L.DomUtil.create('label', '');\n\n        label.style.backgroundImage = `url('images/skins/3D/${player.uuid}.png')`;\n        label.innerText = player.displayName;\n        input.id = label.htmlFor = `${player.uuid}`;\n        input.type = 'radio';\n        input.name = 'player';\n        input.checked = false;\n        input.addEventListener('click', async () => {\n            const manager = this._pl3xmap.playerManager;\n            const player = manager.players.get(input.id);\n            if (player === manager.follow) {\n                manager.follow = undefined;\n            } else {\n                manager.follow = player;\n            }\n            manager.updateFollow();\n        });\n\n        this._players.set(player, {\n            input,\n            label\n        });\n\n        this._skeleton.hidden = true;\n        this._list.appendChild(input);\n        this._list.appendChild(label);\n    }\n\n    private removeListItem(player: Player) {\n        const listItem = this._players.get(player);\n\n        if (!listItem) {\n            return;\n        }\n\n        listItem.label.remove();\n        listItem.input.remove();\n        this._players.delete(player);\n\n        if (!this._players.size) {\n            this._skeleton.hidden = false;\n        }\n    }\n\n    onActivate() {\n        if (this._players.size) {\n            (this._list.querySelector('input:checked') as HTMLElement)?.focus()\n        } else {\n            this._skeleton.focus();\n        }\n    }\n}\n","import SpriteSymbol from \"../../node_modules/svg-baker-runtime/browser-symbol.js\";\nimport sprite from \"../../node_modules/svg-sprite-loader/runtime/browser-sprite.build.js\";\nvar symbol = new SpriteSymbol({\n  \"id\": \"icon--maps\",\n  \"use\": \"icon--maps-usage\",\n  \"viewBox\": \"0 0 268.83 266.53\",\n  \"content\": \"<symbol viewBox=\\\"0 0 268.83 266.53\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"icon--maps\\\"><path d=\\\"M5.235.662C2.153.606 0 2.945 0 6.912v216.577c0 5.288 3.828 11.41 8.582 13.725l57.835 28.165c4.755 2.316 8.582-.078 8.582-5.367V43.434c0-5.288-3.827-11.41-8.582-13.727L8.582 1.544C7.394.965 6.262.681 5.235.662zm32.283 135.96c14.394 0 26.062 11.669 26.062 26.063 0 14.394-24.167 59.55-26.062 57.654-1.854 1.854-26.063-43.26-26.063-57.654 0-14.394 11.669-26.063 26.063-26.063zM202.388 1.013l57.833 28.165c4.755 2.315 8.583 8.437 8.583 13.726v216.58c0 5.29-3.828 7.683-8.583 5.367l-57.833-28.164c-4.755-2.316-8.583-8.438-8.583-13.727V6.38c0-5.289 3.828-7.682 8.583-5.367zM172.012.39c-1.051-.035-2.209.191-3.426.709l-68.342 29.053c-4.867 2.07-8.786 7.993-8.786 13.282V260.01c0 5.29 3.919 7.88 8.786 5.811l68.342-29.053c4.867-2.07 8.786-7.991 8.786-13.28V6.91c0-3.967-2.204-6.417-5.36-6.521zm-36.949 41.216c14.394 0 26.063 11.668 26.063 26.062 0 14.394-24.168 59.55-26.063 57.655C133.209 127.177 109 82.063 109 67.668c0-14.394 11.669-26.062 26.063-26.062z\\\" /><path d=\\\"M48.573 162.689a11.056 11.056 0 0 1-11.056 11.056 11.056 11.056 0 0 1-11.056-11.056 11.056 11.056 0 0 1 11.056-11.056 11.056 11.056 0 0 1 11.056 11.056zm97.547-95.02a11.056 11.056 0 0 1-11.057 11.056 11.056 11.056 0 0 1-11.056-11.056 11.056 11.056 0 0 1 11.056-11.056 11.056 11.056 0 0 1 11.056 11.056z\\\" /></symbol>\"\n});\nvar result = sprite.add(symbol);\nexport default symbol","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {Label} from \"../settings/Lang\";\nimport {World} from \"../world/World\";\nimport {createSVGIcon, handleKeyboardEvent} from \"../util/Util\";\nimport BaseTab from \"./BaseTab\";\nimport '../svg/maps.svg';\n\ninterface WorldListItem {\n    fieldset: HTMLFieldSetElement;\n    inputs: Map<Label, HTMLInputElement>\n}\n\nexport default class WorldsTab extends BaseTab {\n    private readonly _worlds: Map<World, WorldListItem> = new Map();\n    private readonly _skeleton: HTMLParagraphElement;\n    private readonly _list: HTMLFieldSetElement;\n\n    constructor(pl3xmap: Pl3xMap) {\n        super(pl3xmap, 'worlds');\n\n        const lang = pl3xmap.settings!.lang;\n\n        this._button.appendChild(createSVGIcon('maps'));\n        this._button.setAttribute('aria-label', lang.worlds.label);\n        this._button.title = lang.worlds.label;\n\n        const heading = L.DomUtil.create('h2', '', this._content);\n        heading.innerText = lang.worlds.label;\n        heading.id = 'worlds-heading';\n\n        this._skeleton = L.DomUtil.create('p', '', this._content);\n        this._skeleton.innerText = lang.worlds.value;\n        this._skeleton.tabIndex = -1;\n\n        this._list = L.DomUtil.create('fieldset', 'menu', this._content);\n        this._list.setAttribute('aria-labelledby', 'worlds-heading');\n        this._list.setAttribute('role', 'radiogroup');\n\n        this.initEvents();\n    }\n\n    private initEvents() {\n        addEventListener('worldadded', (e: CustomEvent<World>) => this.createListItem(e.detail));\n        addEventListener('worldremoved', (e: CustomEvent<World>) => this.removeListItem(e.detail)); //TODO: Refreshless config updates?\n        addEventListener('rendererselected', (e: CustomEvent<World>) => {\n            this._worlds.get(e.detail)!.inputs.get(e.detail.currentRenderer!)!.checked = true;\n        });\n\n        this._list.addEventListener('keydown', (e: KeyboardEvent) =>\n            handleKeyboardEvent(e, Array.from(this._list.elements) as HTMLElement[]))\n    }\n\n    private createListItem(world: World) {\n        const fieldset = L.DomUtil.create('fieldset'),\n            legend = L.DomUtil.create('legend');\n\n        legend.innerText = world.displayName;\n        fieldset.appendChild(legend);\n\n        const inputs = new Map();\n\n        world.renderers.forEach(renderer => {\n            const input = L.DomUtil.create('input'),\n                label = L.DomUtil.create('label');\n\n            fieldset.appendChild(input);\n            fieldset.appendChild(label);\n\n            //icon.src = `images/icon/${renderer}.png`;\n            label.style.backgroundImage = `url('images/icon/registered/${renderer.icon}.png')`;\n            label.title = renderer.value;\n            input.id = label.htmlFor = `${world.name}-${renderer.label}`;\n            input.type = 'radio';\n            input.name = 'world';\n            input.checked = false;\n            input.classList.add(\"renderer\");\n            input.addEventListener('click', async (e: MouseEvent) => {\n                this._pl3xmap.worldManager.setWorld(world, renderer, world !== this._pl3xmap.worldManager.currentWorld)\n                    // Don't update radio button if switch fails\n                    .catch(() => e.preventDefault());\n            });\n\n            inputs.set(renderer, input);\n        });\n\n        this._worlds.set(world, {\n            fieldset,\n            inputs\n        });\n\n        this._skeleton.hidden = true;\n        this._list.appendChild(fieldset);\n    }\n\n    private removeListItem(world: World) {\n        const listItem = this._worlds.get(world);\n\n        if (!listItem) {\n            return;\n        }\n\n        listItem.fieldset.remove();\n\n        this._worlds.delete(world);\n\n        if (!this._worlds.size) {\n            this._skeleton.hidden = false;\n        }\n    }\n\n    onActivate() {\n        if (this._worlds.size) {\n            (this._list.querySelector('input:checked') as HTMLElement)!.focus()\n        } else {\n            this._skeleton.focus();\n        }\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport Pl3xMapLeafletMap from \"../map/Pl3xMapLeafletMap\";\nimport LayersTab from \"../sidebar/LayersTab\";\nimport PlayersTab from \"../sidebar/PlayersTab\";\nimport WorldsTab from \"../sidebar/WorldsTab\";\n\nexport interface SidebarTab {\n    get button(): HTMLElement;\n\n    get content(): HTMLElement;\n\n    get id(): string;\n\n    onAdd?: (map: Pl3xMapLeafletMap) => void;\n    onActivate?: () => void;\n    onDeactivate?: () => void;\n}\n\nexport default class SidebarControl extends L.Control {\n    private readonly _container: HTMLDivElement;\n    private readonly _buttons: HTMLElement;\n    private readonly _content: HTMLElement;\n\n    private _tabs: Set<SidebarTab> = new Set();\n    private _expanded: boolean = false;\n    private _currentTab?: SidebarTab;\n\n    constructor(pl3xmap: Pl3xMap) {\n        super({position: 'topright'});\n\n        this._container = L.DomUtil.create('div');\n        this._container.id = 'sidebar';\n\n        this._buttons = L.DomUtil.create('header', '', this._container);\n        this._buttons.id = 'sidebar__buttons';\n\n        this._content = L.DomUtil.create('section', '', this._container);\n        this._content.id = 'sidebar__content';\n\n        L.DomEvent.disableClickPropagation(this._container);\n        L.DomEvent.disableScrollPropagation(this._container);\n\n        this.addTab(new WorldsTab(pl3xmap));\n        this.addTab(new LayersTab(pl3xmap));\n        this.addTab(new PlayersTab(pl3xmap));\n        //this.addTab(new MarkersTab(pl3xmap));\n    }\n\n    onAdd(map: Pl3xMapLeafletMap) {\n        for (const tab of this._tabs) {\n            if (tab.onAdd) {\n                tab.onAdd(map);\n            }\n        }\n\n        return this._container;\n    }\n\n    toggle() {\n        if (this._expanded) {\n            this.collapse();\n        } else {\n            this.expand();\n        }\n    }\n\n    expand() {\n        this._expanded = true;\n        this._container.classList.add('sidebar--expanded');\n        this._content.setAttribute('aria-hidden', 'false');\n    }\n\n    collapse() {\n        if (this._currentTab) {\n            this.deactivateTab(this._currentTab, true);\n        }\n\n        this._expanded = false;\n        this._container.classList.remove('sidebar--expanded');\n        this._content.setAttribute('aria-hidden', 'true');\n    }\n\n    addTab(tab: SidebarTab) {\n        if (this._tabs.has(tab)) {\n            return;\n        }\n\n        this._tabs.add(tab);\n\n        tab.button.addEventListener('click', () => this.toggleTab(tab));\n        this._buttons.appendChild(tab.button);\n\n        tab.content.addEventListener('keydown', (e: KeyboardEvent) => {\n            if (e.key === 'Escape') {\n                this.collapse();\n            }\n        });\n\n        this._content.appendChild(tab.content);\n    }\n\n    removeTab(tab: SidebarTab) {\n        if (!this._tabs.has(tab)) {\n            return;\n        }\n\n        this.deactivateTab(tab, false);\n        tab.button.remove();\n    }\n\n    toggleTab(tab: SidebarTab) {\n        if (this._currentTab === tab) {\n            this.collapse();\n        } else {\n            this.activateTab(tab);\n        }\n    }\n\n    activateTab(tab: SidebarTab) {\n        if (!this._expanded) {\n            this.expand();\n        }\n\n        if (this._currentTab) {\n            this.deactivateTab(this._currentTab, false);\n        }\n\n        tab.button.setAttribute('aria-expanded', 'true');\n        tab.content.hidden = false;\n        tab.content.setAttribute('aria-hidden', 'false');\n        this._currentTab = tab;\n\n        if (tab.onActivate) {\n            tab.onActivate();\n        }\n    }\n\n    deactivateTab(tab: SidebarTab, moveFocus: boolean) {\n        if (tab !== this._currentTab) {\n            return;\n        }\n\n        tab.button.setAttribute('aria-expanded', 'false');\n        tab.content.hidden = true;\n        tab.content.setAttribute('aria-hidden', 'true');\n        this._currentTab = undefined;\n\n        if (moveFocus) {\n            tab.button.focus();\n        }\n\n        if (tab.onDeactivate) {\n            tab.onDeactivate();\n        }\n    }\n}\n","import * as L from \"leaflet\";\nimport {Pl3xMap} from \"../Pl3xMap\";\nimport {toLatLng} from \"../util/Util\";\n\n/**\n * Represents the leaflet map.\n */\nexport default class Pl3xMapLeafletMap extends L.Map {\n    declare _controlCorners: { [x: string]: HTMLDivElement; };\n    declare _controlContainer?: HTMLElement;\n    declare _container?: HTMLElement;\n\n    private readonly _pl3xmap: Pl3xMap;\n\n    constructor(pl3xmap: Pl3xMap) {\n        super('map', {\n            // simple crs for custom map tiles\n            crs: L.Util.extend(L.CRS.Simple, {\n                // we need to flip the y-axis correctly\n                // https://stackoverflow.com/a/62320569/3530727\n                transformation: new L.Transformation(1, 0, 1, 0)\n            }),\n            // always 0,0 center\n            center: [0, 0],\n            // show the attribution footer\n            attributionControl: true,\n            // canvas is faster than default svg\n            preferCanvas: true\n        });\n\n        this.on('mousedown', () => {\n            pl3xmap.playerManager.follow = undefined;\n        });\n\n        // sets the leaflet attribution prefix to our project page\n        this.attributionControl.setPrefix(\"<a href='https://modrinth.com/plugin/pl3xmap/'>Pl3xMap &copy; 2022</a>\");\n\n        this._pl3xmap = pl3xmap;\n    }\n\n    // https://stackoverflow.com/a/60391674/3530727\n    // noinspection JSUnusedGlobalSymbols\n    _initControlPos(): void {\n        this._controlContainer = L.DomUtil.create('div', 'leaflet-control-container', this._container);\n\n        const corners: { [x: string]: HTMLDivElement; } = this._controlCorners = {},\n            top = L.DomUtil.create('div', 'leaflet-control-container-top', this._controlContainer),\n            bottom = L.DomUtil.create('div', 'leaflet-control-container-bottom', this._controlContainer);\n\n        function createCorner(vSide: string, hSide: string) {\n            corners[`${vSide}${hSide}`] = L.DomUtil.create('div', `leaflet-${vSide} leaflet-${hSide}`, vSide === 'top' ? top : bottom);\n        }\n\n        createCorner('top', 'left');\n        createCorner('top', 'center');\n        createCorner('top', 'right');\n        createCorner('bottom', 'left');\n        createCorner('bottom', 'center');\n        createCorner('bottom', 'right');\n    }\n\n    public centerOn(x: number, z: number, zoom: number) {\n        this.setView(toLatLng([x, z]), this.getMaxZoomOut() - zoom);\n    }\n\n    public getMaxZoomOut(): number {\n        return this._pl3xmap.worldManager.currentWorld?.zoom.maxOut ?? 0;\n    }\n\n    public getCurrentZoom(): number {\n        return this.getMaxZoomOut() - this.getZoom();\n    }\n}\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[1].use[1]!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[1].use[1]!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[3]!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import {Settings} from \"./settings/Settings\";\nimport {ControlManager} from \"./control/ControlManager\";\nimport {PlayerManager} from \"./player/PlayerManager\";\nimport {WorldManager} from \"./world/WorldManager\";\nimport {getJSON} from \"./util/Util\";\nimport SidebarControl from \"./control/SidebarControl\";\nimport Pl3xMapLeafletMap from \"./map/Pl3xMapLeafletMap\";\nimport \"./scss/styles.scss\";\n\nwindow.onload = function () {\n    window.pl3xmap = new Pl3xMap();\n};\n\n/**\n * Represents the main Pl3xMap class.\n */\nexport class Pl3xMap {\n    private static _instance: Pl3xMap;\n\n    private readonly _map: Pl3xMapLeafletMap;\n\n    private readonly _controlManager: ControlManager;\n    private readonly _playerManager: PlayerManager;\n    private readonly _worldManager: WorldManager;\n\n    private _settings?: Settings;\n\n    private _timer: NodeJS.Timeout | undefined;\n\n    constructor() {\n        Pl3xMap._instance = this;\n\n        this._map = new Pl3xMapLeafletMap(this);\n\n        this._controlManager = new ControlManager(this);\n        this._playerManager = new PlayerManager(this);\n        this._worldManager = new WorldManager(this);\n\n        getJSON('tiles/settings.json').then((json) => {\n            this._settings = json as Settings;\n            document.title = this._settings.lang.title;\n            this.controlManager.sidebarControl = new SidebarControl(this);\n            const promise = this.worldManager.init(this._settings);\n            this.update();\n            return promise;\n        });\n    }\n\n    public static get instance(): Pl3xMap {\n        return Pl3xMap._instance;\n    }\n\n    private update(): void {\n        getJSON('tiles/settings.json').then((json) => {\n            this._settings = json as Settings;\n            this.playerManager.update(this._settings);\n\n            this._timer = setTimeout(() => this.update(), 1000);\n        });\n    }\n\n    get map(): Pl3xMapLeafletMap {\n        return this._map;\n    }\n\n    get controlManager(): ControlManager {\n        return this._controlManager;\n    }\n\n    get playerManager(): PlayerManager {\n        return this._playerManager;\n    }\n\n    get worldManager(): WorldManager {\n        return this._worldManager;\n    }\n\n    get settings(): Settings | undefined {\n        return this._settings;\n    }\n}\n"],"names":["stylesInDOM","getIndexByIdentifier","identifier","result","i","length","modulesToDom","list","options","idCountMap","identifiers","item","id","base","count","concat","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","push","api","domAPI","update","newObj","remove","module","exports","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","needLayer","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","SpriteSymbol","ref","viewBox","content","this","prototype","toString","destroy","this$1","forEach","prop","createCommonjsModule","fn","g","self","deepmerge","isMergeableObject","val","Object","call","emptyTarget","Array","isArray","cloneIfNecessary","value","optionsArgument","clone","defaultArrayMerge","source","destination","slice","indexOf","mergeObject","keys","key","array","arrayMerge","all","reduce","prev","next","factory","namespaces_1","default","svg","name","uri","xlink","defaultAttrs","wrapInSvgString","attrs","map","attr","replace","join","objectToAttrsString","BrowserSpriteSymbol","SpriteSymbol$$1","arguments","__proto__","create","constructor","prototypeAccessors","isMounted","get","node","createFromExistingNode","getAttribute","outerHTML","unmount","mount","mountTarget","render","hasImportNode","importNode","doc","DOMParser","parseFromString","documentElement","parse","childNodes","defineProperties","svg$1","xlink$1","defaultConfig","Sprite","config","symbols","add","symbol","existing","find","filter","s","has","stringifiedSymbols","defaultConfig$1","autoConfigure","mountTo","syncUrlsWithBaseTag","listenLocationChangeEvent","locationChangeEvent","locationChangeAngularEmitter","usagesToUpdate","moveGradientsOutsideSymbol","arrayFrom","arrayLike","browser","test","navigator","userAgent","getUrlWithoutFragment","url","location","href","split","eventName","angular","run","$rootScope","$on","newUrl","oldUrl","data","event","createEvent","initCustomEvent","dispatchEvent","selector","querySelectorAll","insertBefore","xLinkNS","xLinkAttrName","specialUrlCharsPattern","encoder","match","charCodeAt","toUpperCase","sprite","attList","attSelector","updateUrls","startsWith","replaceWith","nodes","matcher","startsWithEncoded","replaceWithEncoded","localName","acc","arrayfied","matched","RegExp","setAttributeNS","updateReferences","Events","BrowserSprite","Sprite$$1","cfg","emitter","on","type","handler","off","emit","evt","_emitter","_autoConfigure","baseUrl","getElementsByTagName","handleLocationChange","_handleLocationChange","bind","addEventListener","spriteNode","symbolNode","updatedNodes","textContent","detail","isNewSymbol","attach","removeEventListener","prepend","mountNode","usages","ready$1","definition","listener","fns","hack","doScroll","domContentLoaded","loaded","readyState","shift","setTimeout","spriteNodeId","loadSprite","getElementById","body","L","SVG","include","_updateEllipse","rx","_radiusX","ry","_radiusY","phi","_tiltDeg","endPoint","_endPointParams","d","x0","y0","largeArc","sweep","x1","y1","_setPath","Canvas","_empty","p","_point","ctx","_ctx","r","hasOwnProperty","_drawnlayers","_leaflet_id","_layers","save","translate","x","y","_tilt","rotate","scale","beginPath","arc","Math","PI","restore","_fillStroke","Ellipse","Path","extend","fill","startAngle","endAngle","initialize","latlng","radii","tilt","setOptions","_latlng","latLng","_mRadiusX","_mRadiusY","setRadius","redraw","getRadius","point","setTilt","getBounds","lngRadius","_getLngRadius","latRadius","_getLatRadius","LatLngBounds","lat","lng","setLatLng","fire","getLatLng","setStyle","_project","pointLeft","_map","latLngToLayerPoint","pointBelow","abs","_centerPointToEndPoint","_updateBounds","sin","cos","sinSquare","cosSquare","aSquare","bSquare","halfWidth","sqrt","halfHeight","w","_clickTolerance","_pxBounds","Bounds","subtract","_update","_updatePath","_renderer","crs","infinite","c","theta2","theta1","delta","_bounds","intersects","_containsPoint","dx","dy","sumA","sumB","weight","ellipse","proto_initIcon","proto_setPos","oldIE","Marker","_initIcon","_setPos","DomUtil","TRANSFORM","addInitHook","iconAnchor","icon","rotationOrigin","rotationAngle","_applyRotation","pos","_icon","setRotationAngle","angle","setRotationOrigin","origin","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","a","o","defineProperty","enumerable","globalThis","Function","nc","ControlManager","pl3xmap","_pl3xmap","sidebarControl","_sidebarControl","control","addTo","blockInfoControl","_blockInfoControl","coordsControl","_coordsControl","linkControl","_linkControl","Player","uuid","displayName","world","position","_name","_uuid","_displayName","_world","_position","createSVGIcon","template","innerHTML","getJSON","fetch","headers","then","res","ok","json","getUrlParam","query","def","URLSearchParams","search","toCenteredLatLng","toLatLng","z","pixelsToMeters","toLatLngBounds","point1","point2","toPoint","metersToPixels","num","getScale","Pl3xMap","instance","pow","getMaxZoomOut","isset","getOrCreatePane","pane","getPane","createPane","fireCustomEvent","CustomEvent","navigationKeys","Set","handleKeyboardEvent","elements","newPosition","focus","preventDefault","mouseEvent","MouseEvent","ctrlKey","shiftKey","metaKey","altKey","bubbles","PlayerManager","_players","Map","settings","toRemove","players","delete","player","set","updateFollow","follow","manager","worldManager","getWorld","currentWorld","setWorld","setView","getZoom","_follow","ControlBox","super","BlockInfoControl","_dom","_blockPalette","entries","String","onAdd","dataset","label","lang","blockInfo","coords","controlManager","zoom","getCurrentZoom","step","regionX","regionZ","fileX","floor","fileZ","tileX","tileZ","blockName","biomeName","getBlockInfo","block","getBlock","biome","biomePalette","yPos","padEnd","CoordsControl","_x","_z","onEvent","onRemove","round","padStart","_y","LineCap","LineJoin","Direction","LinkControl","getUrlFromView","title","link","history","replaceState","center","getCenter","currentRenderer","marker","_key","_marker","Type","Circle","properties","radius","bubblingMouseEvents","interactive","attribution","dom","className","raw","circle","Icon","image","props","iconUrl","retina","iconRetinaUrl","size","iconSize","anchor","shadow","shadowUrl","shadowRetina","shadowRetinaUrl","shadowSize","shadowAnchor","tooltipOffset","tooltip","offset","popupOffset","popup","tooltipAnchor","popupAnchor","iconOptions","setTooltipContent","MultiPolygon","smoothFactor","noClip","createPolys","setLatLngs","static","polys","polygon","polygons","poly","polyline","polylines","line","points","MultiPolyline","createLines","lines","Polygon","createPoly","Polyline","createLine","Rectangle","setBounds","Color","color","_rgb","_hex","_opacity","rgb","hex","opacity","Stroke","enabled","stroke","lineCap","lineJoin","dashArray","dashOffset","_properties","Fill","fillRule","fillColor","fillOpacity","Tooltip","_content","direction","permanent","sticky","Popup","maxWidth","minWidth","maxHeight","autoPan","autoPanPaddingTopLeft","autoPanPaddingBottomRight","autoPanPadding","keepInView","closeButton","autoClose","closeOnEscapeKey","closeOnClick","MarkerOptions","_stroke","_fill","_tooltip","_popup","MarkerLayer","interval","showControls","defaultHidden","priority","zIndex","_markers","_label","_updateInterval","_showControls","_defaultHidden","_priority","_zIndex","_pane","_css","setZIndex","insertAdjacentHTML","insertCss","updateInterval","parseMarker","_timer","unload","clearTimeout","clearLayers","removeFrom","TYPES","bindPopup","bindTooltip","Block","packed","minY","_block","_biome","_yPos","_minY","BlockInfo","_data","getInt","ReversedZoomTileLayer","renderer","format","tileSize","noWrap","minNativeZoom","maxNativeZoom","maxOut","maxZoom","maxIn","zoomOffset","loadBlockInfo","unsetBlockInfo","_getZoomForUrl","_tileZoom","createTile","done","tile","URL","revokeObjectURL","src","_tileOnLoad","_tileOnError","crossOrigin","alt","getTileUrl","blob","reader","FileReader","readAsDataURL","onload","statusText","catch","DoubleTileLayer","_currentLayer","_tileLayer1","createTileLayer","_tileLayer2","switchTileLayer","updateTileLayer","World","_rendererLayers","_markerLayers","_biomePalette","_blockInfo","_loaded","_settings","load","Promise","resolve","palettes","Number","pop","charAt","substring","spawn","tileUpdateInterval","ui","renderers","_currentRendererLayer","_currentRenderer","loadMarkers","markerLayer","blockinfo","arrayBuffer","getBytes","buffer","setBlockInfo","infoMap","Uint8Array","getRendererLayer","currentRendererLayer","setRenderer","_value","tick","resetRenderer","order","markerLayers","background","WorldManager","_worlds","init","worlds","worldSettings","sort","w1","w2","worldName","_currentWorld","resetCoords","centerOn","attributeDom","attributionControl","getContainer","display","LayersTab","hideSingleBase","sortLayers","sortFunction","layer1","layer2","name1","name2","diff","_button","_skeleton","_container","_list","layers","hidden","initEvents","addOverlay","removeLayer","_initLayout","heading","innerText","tabIndex","_layerControlInputs","_addItem","hasLayers","input","layerId","htmlFor","defaultChecked","hasLayer","_onInputClick","_checkDisabledLayers","expand","collapse","onActivate","button","BaseTab","_id","children","focusTarget","firstElementChild","PlayersTab","_heading","createListItem","removeListItem","checked","from","online","max","maxPlayers","backgroundImage","playerManager","listItem","WorldsTab","inputs","fieldset","legend","classList","SidebarControl","_tabs","_expanded","_buttons","addTab","tab","toggle","_currentTab","deactivateTab","toggleTab","removeTab","activateTab","moveFocus","onDeactivate","Pl3xMapLeafletMap","transformation","preferCanvas","setPrefix","_initControlPos","_controlContainer","corners","_controlCorners","top","bottom","createCorner","vSide","hSide","_instance","_controlManager","_playerManager","_worldManager","promise"],"sourceRoot":""}